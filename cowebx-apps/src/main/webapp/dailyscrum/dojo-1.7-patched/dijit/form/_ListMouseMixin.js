/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

define(["dojo/_base/kernel","..","./_ListBase","dojo/_base/event"],function(_1,_2){_1.declare("dijit.form._ListMouseMixin",_2.form._ListBase,{postCreate:function(){this.inherited(arguments);this.connect(this.domNode,"onmousedown","_onMouseDown");this.connect(this.domNode,"onmouseup","_onMouseUp");this.connect(this.domNode,"onmouseover","_onMouseOver");this.connect(this.domNode,"onmouseout","_onMouseOut");},_onMouseDown:function(_3){_1.stopEvent(_3);if(this._hoveredNode){this.onUnhover(this._hoveredNode);this._hoveredNode=null;}this._isDragging=true;this._setSelectedAttr(this._getTarget(_3));},_onMouseUp:function(_4){_1.stopEvent(_4);this._isDragging=false;var _5=this._getSelectedAttr();var _6=this._getTarget(_4);var _7=this._hoveredNode;if(_5&&_6==_5){this.onClick(_5);}else{if(_7&&_6==_7){this._setSelectedAttr(_7);this.onClick(_7);}}},_onMouseOut:function(_8){if(this._hoveredNode){this.onUnhover(this._hoveredNode);if(this._getSelectedAttr()==this._hoveredNode){this.onSelect(this._hoveredNode);}this._hoveredNode=null;}if(this._isDragging){this._cancelDrag=(new Date()).getTime()+1000;}},_onMouseOver:function(_9){if(this._cancelDrag){var _a=(new Date()).getTime();if(_a>this._cancelDrag){this._isDragging=false;}this._cancelDrag=null;}var _b=this._getTarget(_9);if(!_b){return;}if(this._hoveredNode!=_b){if(this._hoveredNode){this._onMouseOut({target:this._hoveredNode});}if(_b&&_b.parentNode==this.containerNode){if(this._isDragging){this._setSelectedAttr(_b);}else{this._hoveredNode=_b;this.onHover(_b);}}}}});return _2.form._ListMouseMixin;});