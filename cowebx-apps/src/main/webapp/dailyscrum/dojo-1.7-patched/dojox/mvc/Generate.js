/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

define(["dojox/mvc/_Container","dojox/mvc/Group","dijit/form/TextBox"],function(){return dojo.declare("dojox.mvc.Generate",[dojox.mvc._Container],{_counter:0,_defaultWidgetMapping:{"String":"dijit.form.TextBox"},_defaultClassMapping:{"Label":"generate-label-cell","String":"generate-dijit-cell","Heading":"generate-heading","Row":"row"},_defaultIdNameMapping:{"String":"textbox_t"},_updateBinding:function(){this.inherited(arguments);this._buildContained();},_buildContained:function(){this._destroyBody();this._counter=0;this.srcNodeRef.innerHTML=this._generateBody(this.get("binding"));this._createBody();},_generateBody:function(_1,_2){var _3="";for(var _4 in _1){if(_1[_4]&&dojo.isFunction(_1[_4].toPlainObject)){if(_1[_4].get(0)){_3+=this._generateRepeat(_1[_4],_4);}else{if(_1[_4].value){_3+=this._generateTextBox(_4);}else{_3+=this._generateGroup(_1[_4],_4,_2);}}}}return _3;},_generateRepeat:function(_5,_6){var _7=(this.classMapping&&this.classMapping["Heading"])?this.classMapping["Heading"]:this._defaultClassMapping["Heading"];var _8="<div data-dojo-type=\"dojox.mvc.Group\" data-dojo-props=\"ref: '"+_6+"'\" + id=\""+this.id+"_r"+this._counter++ +"\">"+"<div class=\""+_7+"\">"+_6+"</div>";_8+=this._generateBody(_5,true);_8+="</div>";return _8;},_generateGroup:function(_9,_a,_b){var _c="<div data-dojo-type=\"dojox.mvc.Group\" data-dojo-props=\"ref: '"+_a+"'\" + id=\""+this.id+"_g"+this._counter++ +"\">";if(!_b){var _d=(this.classMapping&&this.classMapping["Heading"])?this.classMapping["Heading"]:this._defaultClassMapping["Heading"];_c+="<div class=\""+_d+"\">"+_a+"</div>";}_c+=this._generateBody(_9);_c+="</div>";return _c;},_generateTextBox:function(_e){var _f=this.idNameMapping?this.idNameMapping["String"]:this._defaultIdNameMapping["String"];_f=_f+this._counter++;var _10=this.widgetMapping?this.widgetMapping["String"]:this._defaultWidgetMapping["String"];var _11=(this.classMapping&&this.classMapping["Label"])?this.classMapping["Label"]:this._defaultClassMapping["Label"];var _12=(this.classMapping&&this.classMapping["String"])?this.classMapping["String"]:this._defaultClassMapping["String"];var _13=(this.classMapping&&this.classMapping["Row"])?this.classMapping["Row"]:this._defaultClassMapping["Row"];return "<div class=\""+_13+"\">"+"<label class=\""+_11+"\">"+_e+":</label>"+"<input class=\""+_12+"\" data-dojo-type=\""+_10+"\" data-dojo-props=\"name: '"+_f+"', ref: '"+_e+"'\" id=\""+_f+"\"></input>"+"</div>";}});});