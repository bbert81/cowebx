/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

define(["doh","dojo/_base/lang","../_base","../Uuid","../generateRandomUuid","../generateTimeBasedUuid"],function(_1,_2,_3,_4,_5,_6){var _7=function(_8){var _9="00000000-0000-0000-0000-000000000000";if(_8==_9){return;}_1.assertTrue(_8.length==36);var _a="0123456789abcedfABCDEF-";var _b;var _c;for(var i=0;i<36;++i){_b=_8.charAt(i);_c=_a.indexOf(_b);_1.assertTrue(_c!=-1);}var _d=_8.split("-");_1.assertTrue(_d.length==5);_1.assertTrue(_d[0].length==8);_1.assertTrue(_d[1].length==4);_1.assertTrue(_d[2].length==4);_1.assertTrue(_d[3].length==4);_1.assertTrue(_d[4].length==12);var _e=_d[3];var _f=16;var _10=parseInt(_e,_f);var _11=_10.toString(2);_1.assertTrue(_11.length==16);_1.assertTrue(_11.charAt(0)=="1");_1.assertTrue(_11.charAt(1)=="0");};var _12=function(_13){_7(_13);var _14=_13.split("-");var _15=_14[2];_1.assertTrue(_15.charAt(0)=="1");};var _16=function(_17){var _18=_17.split("-");var _19=_18[4];var _1a=_19.charAt(0);var _1b=16;var _1c=parseInt(_1a,_1b);var _1d=_1c.toString(2);var _1e;if(_1d.length==4){_1e=_1d.charAt(0);}else{_1e="0";}_1.assertTrue(_1e=="1");};_1.register("dojox.uuid.tests.uuid",[function test_uuid_capitalization(){var _1f="3b12f1df-5232-4804-897e-917bf397618a";var _20="3B12F1DF-5232-4804-897E-917BF397618A";var _21="b4308fb0-86cd-11da-a72b-0800200c9a66";var _22="B4308FB0-86CD-11DA-A72B-0800200C9A66";var _23=new _4(_1f);var _24=new _4(_20);var _25=new _4(_21);var _26=new _4(_22);_1.assertTrue(_23.isEqual(_24));_1.assertTrue(_24.isEqual(_23));_1.assertTrue(_25.isEqual(_26));_1.assertTrue(_26.isEqual(_25));},function test_uuid_constructor(){var _27,_28;var _29="00000000-0000-0000-0000-000000000000";_27=new _4();_1.assertTrue(_27==_29);var _2a="3b12f1df-5232-4804-897e-917bf397618a";_27=new _4(_2a);_1.assertTrue(_27.isValid());_1.assertTrue(_27.getVariant()==_3.variant.DCE);_1.assertTrue(_27.getVersion()==_3.version.RANDOM);_28=new _4(new String(_2a));_1.assertTrue(_27.isEqual(_28));var _2b="b4308fb0-86cd-11da-a72b-0800200c9a66";_27=new _4(_2b);_1.assertTrue(_27.isValid());_1.assertTrue(_27.getVariant()==_3.variant.DCE);_1.assertTrue(_27.getVersion()==_3.version.TIME_BASED);_1.assertTrue(_27.getNode()=="0800200c9a66");var _2c=_27.getTimestamp();var _2d=_27.getTimestamp(Date);var _2e=_27.getTimestamp(String);var _2f=_27.getTimestamp("hex");var now=new Date();_1.assertTrue(_2c.valueOf()==_2d.valueOf());_1.assertTrue(_2f=="1da86cdb4308fb0");_1.assertTrue(_2c<now);},function test_uuid_generators(){var _30=[_3.generateNilUuid,_5,_6];for(var i in _30){var _31=_30[i];var _32=_31();_1.assertTrue((typeof _32)=="string");_7(_32);var _33=new _4(_32);if(_31!=_3.generateNilUuid){_1.assertTrue(_33.getVariant()==_3.variant.DCE);}_1.assertTrue(_33.isEqual(_33));_1.assertTrue(_33.compare(_33)==0);_1.assertTrue(_4.compare(_33,_33)==0);_7(_33.toString());_1.assertTrue(_33.toString().length==36);if(_31!=_3.generateNilUuid){var _34=_31();var _35=_31();_1.assertTrue(_34!=_35);_4.setGenerator(_31);var _36=new _4();var _37=new _4();_1.assertTrue(_31===_4.getGenerator());_4.setGenerator(null);_1.assertTrue(_36!=_37);_1.assertTrue(!_36.isEqual(_37));_1.assertTrue(!_37.isEqual(_36));var _38=_4.compare(_36,_37);var _39=_4.compare(_37,_36);_1.assertTrue(_38+_39==0);_1.assertTrue(_38!=0);_1.assertTrue(_39!=0);_1.assertTrue(!_37.isEqual(_36));}if(_31==_5){_1.assertTrue(_33.getVersion()==_3.version.RANDOM);}if(_31==_6){_12(_33.toString());_1.assertTrue(_33.getVersion()==_3.version.TIME_BASED);_1.assertTrue(_2.isString(_33.getNode()));_1.assertTrue(_33.getNode().length==12);var _3a=_33.getTimestamp();var _3b=_33.getTimestamp(Date);var _3c=_33.getTimestamp(String);var _3d=_33.getTimestamp("hex");_1.assertTrue(_3b instanceof Date);_1.assertTrue(_3a.valueOf()==_3b.valueOf());_1.assertTrue(_3d.length==15);}}},function test_uuid_nilGenerator(){var _3e="00000000-0000-0000-0000-000000000000";var _3f=_3.generateNilUuid();_1.assertTrue(_3f==_3e);},function test_uuid_timeBasedGenerator(){var _40;var _41;var _42=_6;var _43=_42();var _44=new _4(_42());var _45=_42("017bf397618a");var _46=_42("f17bf397618a");var _47=_42(new String("017BF397618A"));_6.setNode("017bf397618a");var _48=_42();var _49=new _4(_42());var _4a=_6.getNode();_1.assertTrue(_4a=="017bf397618a");function _4b(_4c){var _4d=_4c.split("-");return _4d[4];};_16(_43);_16(_44.toString());_16(_46);_1.assertTrue(_4b(_45)=="017bf397618a");_1.assertTrue(_4b(_46)=="f17bf397618a");_1.assertTrue(_4b(_47)=="017bf397618a");_1.assertTrue(_4b(_48)=="017bf397618a");_1.assertTrue(_49.getNode()=="017bf397618a");_12(_43);_12(_44.toString());_12(_45);_12(_46);_12(_47);_12(_48);_12(_49.toString());},function test_uuid_invalidUuids(){var _4e=[];_4e.push("Hello world!");_4e.push("3B12F1DF-5232-1804-897E-917BF39761");_4e.push("3B12F1DF-5232-1804-897E-917BF39761-8A");_4e.push("3B12F1DF-5232-1804-897E917BF39761-8A");_4e.push("HB12F1DF-5232-1804-897E-917BF397618A");var _4f=0;for(var i in _4e){var _50=_4e[i];try{new _4(_50);}catch(e){++_4f;}}_1.assertTrue(_4f==_4e.length);}]);});