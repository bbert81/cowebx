/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

define(["dojo","dijit","dojox","dojox/json/ref"],function(_1,_2,_3){_1.getObject("dojox.json.tests.ref",1);doh.register("dojox.json.tests.ref",[function fromRefJson(t){var _4="{a:{$ref:\"#\"},id:\"root\",c:{d:\"e\",f:{$ref:\"root.c\"}},b:{$ref:\"#.c\"},\"an array\":[\"a string\"],\"a string\":{$ref:\"#an array.0\"}}";var _5=_3.json.ref.fromJson(_4);t.assertEqual(_5,_5.a);t.assertEqual(_5.c,_5.c.f);t.assertEqual(_5.c,_5.b);t.assertEqual(_5["a string"],"a string");},function toAndFromRefJson(t){var _6={a:{},b:{"has space":{}}};_6.a.d=_6;var _7=_6.array=[{}];_7[1]=_7[0];_6.b.g=_6.a;_6.b["has space"].f=_6.b;_6.b.h=_6.a;var _8=_3.json.ref.fromJson(_3.json.ref.toJson(_6));t.assertEqual(_8.a.d,_8);t.assertEqual(_8.b.g,_8.a);t.assertEqual(_8.b["has space"].f,_8.b);t.assertEqual(_8.b.h,_8.a);t.assertEqual(_8.array[0],_8.array[1]);},function usingSchemas(t){var _9="{id:\"/dog/1\",eats:{$ref:\"/cat/2\"},aTime:\"2008-11-07T20:26:17-07:00\"}";var _a={"/dog/":{prototype:{barks:true},properties:{aTime:{format:"date-time"}}},"/cat/":{prototype:{meows:true}}};var _b=_3.json.ref.fromJson(_9,{schemas:_a});t.t(_b.barks);t.t(_b.aTime instanceof Date);t.t(_b.eats.meows);},function secondLevelLazy(t){var _c="[{$ref:1,foo:\"bar\"},{$ref:2, me:{$ref:2},first:{$ref:1}}]";var _d=_3.json.ref.fromJson(_c);t.is(_d[0].foo,"bar");t.is(_d[1],_d[1].me);t.is(_d[0],_d[1].first);}]);});require(["dojox/json/tests/ref"]);