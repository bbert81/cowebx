/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

define(["dojo","dijit","dojox","dojox/data/WikipediaStore","dojo/data/api/Read","dojo/data/api/Identity"],function(_1,_2,_3){_1.getObject("dojox.data.tests.stores.WikipediaStore",1);_3.data.tests.stores.WikipediaStore.getStore=function(){return new _3.data.WikipediaStore();};_3.data.tests.stores.WikipediaStore.error=function(t,d,_4){d.errback(_4);};doh.register("dojox.data.tests.stores.WikipediaStore",[{name:"ReadAPI: containsValue",timeout:30000,runTest:function(t){var ws=_3.data.tests.stores.WikipediaStore.getStore();var d=new doh.Deferred();ws.fetch({query:{title:"Main Page"},onComplete:function(_5,_6){t.is(1,_5.length);t.t(ws.containsValue(_5[0],"title","Main Page"));d.callback(true);},onError:_1.partial(_3.data.tests.stores.WikipediaStore.error,t,d)});return d;}},{name:"ReadAPI: fetch (one)",timeout:30000,runTest:function(t){var ws=_3.data.tests.stores.WikipediaStore.getStore();var d=new doh.Deferred();ws.fetch({query:{title:"Main Page"},onItem:function(_7,_8){t.t(_7.title&&_7.title.length&&_7.title.length>0);d.callback(true);},onError:_1.partial(_3.data.tests.stores.WikipediaStore.error,doh,d)});return d;}},{name:"ReadAPI: fetch (query 30)",timeout:30000,runTest:function(t){var ws=_3.data.tests.stores.WikipediaStore.getStore();var d=new doh.Deferred();ws.fetch({query:{action:"query",text:"dojo"},count:30,onComplete:function(_9,_a){t.is(30,_9.length);d.callback(true);},onError:_1.partial(_3.data.tests.stores.WikipediaStore.error,t,d)});return d;}},{name:"ReadAPI: fetch (paged)",timeout:30000,runTest:function(t){var ws=_3.data.tests.stores.WikipediaStore.getStore();var d=new doh.Deferred();var _b=0;ws.fetch({query:{action:"query",text:"dojo"},count:15,onComplete:function(_c,_d){t.is(15,_c.length);_b=_c.length;ws.fetch({query:{action:"query",text:"dojo"},start:_b+1,count:15,onComplete:function(_e,_f){t.is(30,_b+_e.length);d.callback(true);}});},onError:_1.partial(_3.data.tests.stores.WikipediaStore.error,t,d)});return d;}},{name:"ReadAPI: getAttributes",timeout:30000,runTest:function(t){var ws=_3.data.tests.stores.WikipediaStore.getStore();var d=new doh.Deferred();ws.fetch({query:{title:"Main Page"},onComplete:function(_10,_11){t.is(1,_10.length);t.t(ws.isItem(_10[0]));t.t(ws.getAttributes(_10[0]).length>0);d.callback(true);},onError:_1.partial(_3.data.tests.stores.WikipediaStore.error,t,d)});return d;}},{name:"ReadAPI: getLabel",timeout:30000,runTest:function(t){var ws=_3.data.tests.stores.WikipediaStore.getStore();var d=new doh.Deferred();ws.fetch({query:{action:"query",text:"dojo"},count:1,onComplete:function(_12,_13){t.is(1,_12.length);t.t(ws.getLabel(_12[0])!==null);d.callback(true);},onError:_1.partial(_3.data.tests.stores.WikipediaStore.error,t,d)});return d;}},{name:"ReadAPI: getLabelAttributes",timeout:30000,runTest:function(t){var ws=_3.data.tests.stores.WikipediaStore.getStore();var d=new doh.Deferred();ws.fetch({query:{action:"query",text:"dojo"},count:1,onComplete:function(_14,_15){t.is(1,_14.length);var _16=ws.getLabelAttributes(_14[0]);t.t(_1.isArray(_16));t.is("title",_16[0]);d.callback(true);},onError:_1.partial(_3.data.tests.stores.WikipediaStore.error,t,d)});return d;}},{name:"ReadAPI: getValue",timeout:30000,runTest:function(t){var ws=_3.data.tests.stores.WikipediaStore.getStore();var d=new doh.Deferred();ws.fetch({query:{title:"Main Page"},onComplete:function(_17,_18){t.is(1,_17.length);var i=_17[0];t.t(ws.getValue(i,"text")!==null);t.t(ws.getValue(i,"links")!==null);t.t(ws.getValue(i,"categories")!==null);t.t(ws.getValue(i,"images")!==null);d.callback(true);},onError:_1.partial(_3.data.tests.stores.WikipediaStore.error,t,d)});return d;}},{name:"ReadAPI: getValues",timeout:30000,runTest:function(t){var ws=_3.data.tests.stores.WikipediaStore.getStore();var d=new doh.Deferred();ws.fetch({query:{title:"Main Page"},onComplete:function(_19,_1a){t.is(1,_19.length);var i=_19[0];t.t(_1.isArray(ws.getValues(i,"text")));t.t(_1.isArray(ws.getValues(i,"links")));t.t(_1.isArray(ws.getValues(i,"categories")));t.t(_1.isArray(ws.getValues(i,"images")));d.callback(true);},onError:_1.partial(_3.data.tests.stores.WikipediaStore.error,t,d)});return d;}},{name:"ReadAPI: hasAttribute",timeout:30000,runTest:function(t){var ws=_3.data.tests.stores.WikipediaStore.getStore();var d=new doh.Deferred();ws.fetch({query:{title:"Main Page"},onComplete:function(_1b,_1c){t.is(1,_1b.length);var i=_1b[0];t.t(i!==null);t.t(ws.hasAttribute(i,"title"));t.t(ws.hasAttribute(i,"text"));t.t(ws.hasAttribute(i,"links"));t.t(ws.hasAttribute(i,"categories"));t.t(ws.hasAttribute(i,"images"));d.callback(true);},onError:_1.partial(_3.data.tests.stores.WikipediaStore.error,t,d)});return d;}},{name:"ReadAPI: isItem",timeout:30000,runTest:function(t){var ws=_3.data.tests.stores.WikipediaStore.getStore();var d=new doh.Deferred();ws.fetch({query:{action:"query",text:"dojo"},count:10,onComplete:function(_1d,_1e){t.is(10,_1d.length);for(var i=0;i<_1d.length;i++){t.t(ws.isItem(_1d[i]));}d.callback(true);},onError:_1.partial(_3.data.tests.stores.WikipediaStore.error,t,d)});return d;}},{name:"ReadAPI: isItemLoaded",timeout:30000,runTest:function(t){var ws=_3.data.tests.stores.WikipediaStore.getStore();var d=new doh.Deferred();ws.fetch({query:{action:"query",text:"dojo"},count:5,onComplete:function(_1f,_20){t.is(5,_1f.length);ws.loadItem({item:_1f[0],onItem:function(_21,_22){t.t(ws.isItemLoaded(_21));t.f(ws.isItemLoaded(_1f[1]));d.callback(true);}});},onError:_1.partial(_3.data.tests.stores.WikipediaStore.error,t,d)});return d;}},{name:"IdentityAPI: getIdentity",timeout:30000,runTest:function(t){var ws=_3.data.tests.stores.WikipediaStore.getStore();var d=new doh.Deferred();ws.fetch({query:{title:"Main Page"},onComplete:function(_23,_24){t.is(1,_23.length);t.t(ws.isItem(_23[0]));t.t(ws.getIdentity(_23[0])==="Main Page");d.callback(true);},onError:_1.partial(_3.data.tests.stores.WikipediaStore.error,t,d)});return d;}},{name:"ReadAPI: loadItem",timeout:30000,runTest:function(t){var ws=_3.data.tests.stores.WikipediaStore.getStore();var d=new doh.Deferred();ws.fetch({query:{action:"query",text:"dojo"},count:5,onComplete:function(_25,_26){t.is(5,_25.length);t.t(ws.isItem(_25[0]));t.t(ws.getIdentityAttributes(_25[0]).length>0);ws.loadItem({item:_25[0],onItem:function(_27,_28){t.t(ws.isItem(_27));t.t(ws.isItemLoaded(_27));d.callback(true);}});},onError:_1.partial(_3.data.tests.stores.WikipediaStore.error,t,d)});return d;}},{name:"IdentityAPI: getIdentityAttributes",timeout:30000,runTest:function(t){var ws=_3.data.tests.stores.WikipediaStore.getStore();var d=new doh.Deferred();ws.fetch({query:{title:"Main Page"},onComplete:function(_29,_2a){t.is(1,_29.length);t.t(ws.isItem(_29[0]));t.t(ws.getIdentityAttributes(_29[0]).length>0);d.callback(true);},onError:_1.partial(_3.data.tests.stores.WikipediaStore.error,t,d)});return d;}},{name:"IdentityAPI: fetchItemByIdentity",timeout:30000,runTest:function(t){var ws=_3.data.tests.stores.WikipediaStore.getStore();var d=new doh.Deferred();ws.fetch({query:{title:"Main Page"},onComplete:function(_2b,_2c){var _2d=_2b[0];t.is(1,_2b.length);t.t(ws.isItem(_2d));ws.fetchItemByIdentity({identity:"Main Page",onItem:function(_2e,_2f){t.t(ws.isItem(_2e));t.t(ws.getValue(_2d,"title")===ws.getValue(_2e,"title"));d.callback(true);}});},onError:_1.partial(_3.data.tests.stores.WikipediaStore.error,t,d)});return d;}},function testIdentityAPI_getFeatures(t){var ws=_3.data.tests.stores.WikipediaStore.getStore();var _30=ws.getFeatures();var _31=0;for(var i in _30){if(i==="dojo.data.api.Read"){_31++;}if(i==="dojo.data.api.Identity"){_31++;}}t.assertTrue(_31===2);},function testIdentityAPI_functionConformance(t){var ws=_3.data.tests.stores.WikipediaStore.getStore();var _32=new _1.data.api.Identity();var _33=true;for(var i in _32){if(i.toString().charAt(0)==="_"){continue;}if(typeof _32[i]==="function"){if(!(typeof ws[i]==="function")){_33=false;break;}}}t.assertTrue(_33);}]);});require(["dojox/data/tests/stores/WikipediaStore"]);