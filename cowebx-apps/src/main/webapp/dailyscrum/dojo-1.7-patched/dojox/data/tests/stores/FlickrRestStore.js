/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

define(["dojo","dijit","dojox","dojox/data/FlickrRestStore","dojo/data/api/Read"],function(_1,_2,_3){_1.getObject("dojox.data.tests.stores.FlickrRestStore",1);_3.data.tests.stores.FlickrRestStore.error=function(t,d,_4){d.errback(_4);};doh.register("dojox.data.tests.stores.FlickrRestStore",[{name:"ReadAPI:  Fetch_One",timeout:10000,runTest:function(t){var _5=new _3.data.FlickrRestStore();var d=new doh.Deferred();function _6(_7,_8){t.is(1,_7.length);d.callback(true);};_5.fetch({query:{userid:"44153025@N00",apikey:"8c6803164dbc395fb7131c9d54843627"},count:1,onComplete:_6,onError:_1.partial(_3.data.tests.stores.FlickrRestStore.error,doh,d)});return d;}},{name:"ReadAPI:  Fetch_20_Streaming",timeout:10000,runTest:function(t){var _9=new _3.data.FlickrRestStore();var d=new doh.Deferred();var _a=0;function _b(_c,_d){t.assertTrue(_9.isItem(_c));_a++;};function _e(_f,_10){t.is(5,_a);t.is(null,_f);d.callback(true);};_9.fetch({query:{userid:"44153025@N00",apikey:"8c6803164dbc395fb7131c9d54843627"},onBegin:null,count:5,onItem:_b,onComplete:_e,onError:_1.partial(_3.data.tests.stores.FlickrRestStore.error,t,d)});return d;}},{name:"ReadAPI:  Fetch_Paging",timeout:30000,runTest:function(t){var _11=new _3.data.FlickrRestStore();var d=new doh.Deferred();function _12(_13,_14){t.is(5,_13.length);_14.start=3;_14.count=1;_14.onComplete=_15;_11.fetch(_14);};function _15(_16,_17){t.is(1,_16.length);_17.start=0;_17.count=5;_17.onComplete=_18;_11.fetch(_17);};function _18(_19,_1a){t.is(5,_19.length);_1a.start=2;_1a.count=18;_1a.onComplete=_1b;_11.fetch(_1a);};function _1b(_1c,_1d){t.is(18,_1c.length);_1d.start=9;_1d.count=11;_1d.onComplete=_1e;_11.fetch(_1d);};function _1e(_1f,_20){t.is(11,_1f.length);_20.start=4;_20.count=16;_20.onComplete=_21;_11.fetch(_20);};function _21(_22,_23){t.is(16,_22.length);d.callback(true);};function _24(_25,_26){t.is(7,_25.length);_26.start=1;_26.count=5;_26.onComplete=_12;_11.fetch(_26);};_11.fetch({query:{userid:"44153025@N00",apikey:"8c6803164dbc395fb7131c9d54843627"},count:7,onComplete:_24,onError:_1.partial(_3.data.tests.stores.FlickrRestStore.error,t,d)});return d;}},{name:"ReadAPI:  getLabel",timeout:10000,runTest:function(t){var _27=new _3.data.FlickrRestStore();var d=new doh.Deferred();function _28(_29,_2a){t.assertEqual(_29.length,1);var _2b=_27.getLabel(_29[0]);t.assertTrue(_2b!==null);d.callback(true);};_27.fetch({query:{userid:"44153025@N00",apikey:"8c6803164dbc395fb7131c9d54843627"},count:1,onComplete:_28,onError:_1.partial(_3.data.tests.stores.FlickrRestStore.error,t,d)});return d;}},{name:"ReadAPI:  getLabelAttributes",timeout:10000,runTest:function(t){var _2c=new _3.data.FlickrRestStore();var d=new doh.Deferred();function _2d(_2e,_2f){t.assertEqual(_2e.length,1);var _30=_2c.getLabelAttributes(_2e[0]);t.assertTrue(_1.isArray(_30));t.assertEqual("title",_30[0]);d.callback(true);};_2c.fetch({query:{userid:"44153025@N00",apikey:"8c6803164dbc395fb7131c9d54843627"},count:1,onComplete:_2d,onError:_1.partial(_3.data.tests.stores.FlickrRestStore.error,t,d)});return d;}},{name:"ReadAPI:  getValue",timeout:10000,runTest:function(t){var _31=new _3.data.FlickrRestStore();var d=new doh.Deferred();function _32(_33){t.is(1,_33.length);t.assertTrue(_31.getValue(_33[0],"title")!==null);t.assertTrue(_31.getValue(_33[0],"imageUrl")!==null);t.assertTrue(_31.getValue(_33[0],"imageUrlSmall")!==null);t.assertTrue(_31.getValue(_33[0],"imageUrlMedium")!==null);d.callback(true);};_31.fetch({query:{userid:"44153025@N00",apikey:"8c6803164dbc395fb7131c9d54843627"},count:1,onComplete:_32,onError:_1.partial(_3.data.tests.stores.FlickrRestStore.error,t,d)});return d;}},{name:"ReadAPI:  getValues",timeout:10000,runTest:function(t){var _34=new _3.data.FlickrRestStore();var d=new doh.Deferred();function _35(_36){t.is(1,_36.length);var _37=_34.getValues(_36[0],"title");t.assertTrue(_37 instanceof Array);var _38=_34.getValues(_36[0],"imageUrl");t.assertTrue(_38 instanceof Array);var _39=_34.getValues(_36[0],"imageUrlSmall");t.assertTrue(_39 instanceof Array);var _3a=_34.getValues(_36[0],"imageUrlMedium");t.assertTrue(_3a instanceof Array);d.callback(true);};_34.fetch({query:{userid:"44153025@N00",apikey:"8c6803164dbc395fb7131c9d54843627"},count:1,onComplete:_35,onError:_1.partial(_3.data.tests.stores.FlickrRestStore.error,t,d)});return d;}},{name:"ReadAPI:  isItem",timeout:10000,runTest:function(t){var _3b=new _3.data.FlickrRestStore();var d=new doh.Deferred();function _3c(_3d){t.is(5,_3d.length);for(var i=0;i<_3d.length;i++){t.assertTrue(_3b.isItem(_3d[i]));}d.callback(true);};_3b.fetch({query:{userid:"44153025@N00",apikey:"8c6803164dbc395fb7131c9d54843627"},count:5,onComplete:_3c,onError:_1.partial(_3.data.tests.stores.FlickrRestStore.error,t,d)});return d;}},{name:"ReadAPI:  hasAttribute",timeout:10000,runTest:function(t){var _3e=new _3.data.FlickrRestStore();var d=new doh.Deferred();function _3f(_40){t.is(1,_40.length);t.assertTrue(_40[0]!==null);t.assertTrue(_3e.hasAttribute(_40[0],"title"));t.assertTrue(_3e.hasAttribute(_40[0],"author"));t.assertTrue(!_3e.hasAttribute(_40[0],"Nothing"));t.assertTrue(!_3e.hasAttribute(_40[0],"Text"));var _41=false;try{_3e.hasAttribute(_40[0],null);}catch(e){_41=true;}t.assertTrue(_41);d.callback(true);};_3e.fetch({query:{userid:"44153025@N00",apikey:"8c6803164dbc395fb7131c9d54843627"},count:1,onComplete:_3f,onError:_1.partial(_3.data.tests.stores.FlickrRestStore.error,t,d)});return d;}},{name:"ReadAPI:  containsValue",timeout:10000,runTest:function(t){var _42=new _3.data.FlickrRestStore();var d=new doh.Deferred();function _43(_44){t.is(1,_44.length);d.callback(true);};_42.fetch({query:{userid:"44153025@N00",apikey:"8c6803164dbc395fb7131c9d54843627"},count:1,onComplete:_43,onError:_1.partial(_3.data.tests.stores.FlickrRestStore.error,t,d)});return d;}},{name:"ReadAPI:  getAttributes",timeout:10000,runTest:function(t){var _45=new _3.data.FlickrRestStore();var d=new doh.Deferred();function _46(_47){t.is(1,_47.length);t.assertTrue(_45.isItem(_47[0]));var _48=_45.getAttributes(_47[0]);t.is(11,_48.length);d.callback(true);};_45.fetch({query:{userid:"44153025@N00",apikey:"8c6803164dbc395fb7131c9d54843627"},count:1,onComplete:_46,onError:_1.partial(_3.data.tests.stores.FlickrRestStore.error,t,d)});return d;}},function testReadAPI_getFeatures(t){var _49=new _3.data.FlickrRestStore();var _4a=_49.getFeatures();var _4b=0;for(i in _4a){t.assertTrue((i==="dojo.data.api.Read"));_4b++;}t.assertTrue(_4b===1);},function testReadAPI_functionConformance(t){var _4c=new _3.data.FlickrRestStore();var _4d=new _1.data.api.Read();var _4e=true;for(i in _4d){if(i.toString().charAt(0)!=="_"){var _4f=_4d[i];if(typeof _4f==="function"){var _50=_4c[i];if(!(typeof _50==="function")){_4e=false;break;}}}}}]);});require(["dojox/data/tests/stores/FlickrRestStore"]);