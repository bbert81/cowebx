/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

define(["dojo/_base/lang","./common","dijit/_WidgetBase","./scrollable"],function(_1,_2,_3,_4){dojo.declare("dojox.mobile._ScrollableMixin",null,{fixedHeader:"",fixedFooter:"",scrollableParams:{},destroy:function(){this.cleanup();this.inherited(arguments);},startup:function(){if(this._started){return;}var _5;var _6=this.scrollableParams;if(this.fixedHeader){_5=dojo.byId(this.fixedHeader);if(_5.parentNode==this.domNode){this.isLocalHeader=true;}_6.fixedHeaderHeight=_5.offsetHeight;}if(this.fixedFooter){_5=dojo.byId(this.fixedFooter);if(_5.parentNode==this.domNode){this.isLocalFooter=true;_5.style.bottom="0px";}_6.fixedFooterHeight=_5.offsetHeight;}this.init(_6);for(var p=this.getParent();p;p=p.getParent()){if(p&&p.scrollableParams){this.isNested=true;this.dirLock=true;p.dirLock=true;break;}}this.inherited(arguments);},findAppBars:function(){var i,_7,c;for(i=0,_7=dojo.body().childNodes.length;i<_7;i++){c=dojo.body().childNodes[i];this.checkFixedBar(c,false);}if(this.domNode.parentNode){for(i=0,_7=this.domNode.parentNode.childNodes.length;i<_7;i++){c=this.domNode.parentNode.childNodes[i];this.checkFixedBar(c,false);}}this.fixedFooterHeight=this.fixedFooter?this.fixedFooter.offsetHeight:0;},checkFixedBar:function(_8,_9){if(_8.nodeType===1){var _a=_8.getAttribute("fixed")||(dijit.byNode(_8)&&dijit.byNode(_8).fixed);if(_a==="top"){dojo.addClass(_8,"mblFixedHeaderBar");if(_9){_8.style.top="0px";this.fixedHeader=_8;}return _a;}else{if(_a==="bottom"){dojo.addClass(_8,"mblFixedBottomBar");this.fixedFooter=_8;return _a;}}}return null;}});dojo.extend(dojox.mobile._ScrollableMixin,new _4(dojo,dojox));return dojox.mobile._ScrollableMixin;});