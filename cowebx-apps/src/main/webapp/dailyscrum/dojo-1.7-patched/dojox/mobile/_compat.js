/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

define(["dojo/_base/lang","./common","dijit/_base/sniff","dojo/_base/fx","dojox/fx","dojox/fx/flip"],function(_1,_2,_3,_4,fx,_5){if(!dojo.isWebKit){if(dojox.mobile.View){dojo.extend(dojox.mobile.View,{_doTransition:function(_6,_7,_8,_9){var _a;this.wakeUp(_7);if(!_8||_8=="none"){_7.style.display="";_6.style.display="none";_7.style.left="0px";this.invokeCallback();}else{if(_8=="slide"||_8=="cover"||_8=="reveal"){var w=_6.offsetWidth;var s1=dojo.fx.slideTo({node:_6,duration:400,left:-w*_9,top:dojo.style(_6,"top")});var s2=dojo.fx.slideTo({node:_7,duration:400,left:0,top:dojo.style(_7,"top")});_7.style.position="absolute";_7.style.left=w*_9+"px";_7.style.display="";_a=dojo.fx.combine([s1,s2]);dojo.connect(_a,"onEnd",this,function(){_6.style.display="none";_6.style.left="0px";_7.style.position="relative";toWidget=dijit.byNode(_7);if(toWidget&&!dojo.hasClass(toWidget.domNode,"out")){toWidget.containerNode.style.paddingTop="";}this.invokeCallback();});_a.play();}else{if(_8=="slidev"||_8=="coverv"||_8=="reavealv"){var h=_6.offsetHeight;var s1=dojo.fx.slideTo({node:_6,duration:400,left:0,top:-h*_9});var s2=dojo.fx.slideTo({node:_7,duration:400,left:0,top:0});_7.style.position="absolute";_7.style.top=h*_9+"px";_7.style.left="0px";_7.style.display="";_a=dojo.fx.combine([s1,s2]);dojo.connect(_a,"onEnd",this,function(){_6.style.display="none";_7.style.position="relative";this.invokeCallback();});_a.play();}else{if(_8=="flip"||_8=="flip2"){_a=dojox.fx.flip({node:_6,dir:"right",depth:0.5,duration:400});_7.style.position="absolute";_7.style.left="0px";dojo.connect(_a,"onEnd",this,function(){_6.style.display="none";_7.style.position="relative";_7.style.display="";this.invokeCallback();});_a.play();}else{_a=dojo.fx.chain([dojo.fadeOut({node:_6,duration:600}),dojo.fadeIn({node:_7,duration:600})]);_7.style.position="absolute";_7.style.left="0px";_7.style.display="";dojo.style(_7,"opacity",0);dojo.connect(_a,"onEnd",this,function(){_6.style.display="none";_7.style.position="relative";dojo.style(_6,"opacity",1);this.invokeCallback();});_a.play();}}}}dojox.mobile.currentView=dijit.byNode(_7);},wakeUp:function(_b){if(dojo.isIE&&!_b._wokeup){_b._wokeup=true;var _c=_b.style.display;_b.style.display="";var _d=_b.getElementsByTagName("*");for(var i=0,_e=_d.length;i<_e;i++){var _f=_d[i].style.display;_d[i].style.display="none";_d[i].style.display="";_d[i].style.display=_f;}_b.style.display=_c;}}});}if(dojox.mobile.Switch){dojo.extend(dojox.mobile.Switch,{_changeState:function(_10,_11){var on=(_10==="on");var pos;if(!on){pos=-this.inner.firstChild.firstChild.offsetWidth;}else{pos=0;}this.left.style.display="";this.right.style.display="";var _12=this;var f=function(){dojo.removeClass(_12.domNode,on?"mblSwitchOff":"mblSwitchOn");dojo.addClass(_12.domNode,on?"mblSwitchOn":"mblSwitchOff");_12.left.style.display=on?"":"none";_12.right.style.display=!on?"":"none";};if(_11){var a=dojo.fx.slideTo({node:this.inner,duration:300,left:pos,onEnd:f});a.play();}else{if(on||pos){this.inner.style.left=pos+"px";}f();}}});}if(dojo.isIE){if(dojox.mobile.RoundRect){dojo.extend(dojox.mobile.RoundRect,{buildRendering:function(){dojox.mobile.createRoundRect(this);this.domNode.className="mblRoundRect";}});}if(dojox.mobile.RoundRectList){dojox.mobile.RoundRectList._addChild=dojox.mobile.RoundRectList.prototype.addChild;dojo.extend(dojox.mobile.RoundRectList,{buildRendering:function(){dojox.mobile.createRoundRect(this,true);this.domNode.className="mblRoundRectList";},postCreate:function(){this.redrawBorders();},addChild:function(_13){dojox.mobile.RoundRectList._addChild.apply(this,arguments);this.redrawBorders();if(dojox.mobile.applyPngFilter){dojox.mobile.applyPngFilter(_13.domNode);}},redrawBorders:function(){var _14=false;for(var i=this.containerNode.childNodes.length-1;i>=0;i--){var c=this.containerNode.childNodes[i];if(c.tagName=="LI"){c.style.borderBottomStyle=_14?"solid":"none";_14=true;}}}});}if(dojox.mobile.EdgeToEdgeList){dojo.extend(dojox.mobile.EdgeToEdgeList,{buildRendering:function(){this.domNode=this.containerNode=this.srcNodeRef||dojo.doc.createElement("UL");this.domNode.className="mblEdgeToEdgeList";}});}if(dojox.mobile.IconContainer){dojox.mobile.IconContainer._addChild=dojox.mobile.IconContainer.prototype.addChild;dojo.extend(dojox.mobile.IconContainer,{addChild:function(_15){dojox.mobile.IconContainer._addChild.apply(this,arguments);if(dojox.mobile.applyPngFilter){dojox.mobile.applyPngFilter(_15.domNode);}}});}dojo.mixin(dojox.mobile,{createRoundRect:function(_16,_17){var i;_16.domNode=dojo.doc.createElement("DIV");_16.domNode.style.padding="0px";_16.domNode.style.backgroundColor="transparent";_16.domNode.style.borderStyle="none";_16.containerNode=dojo.doc.createElement(_17?"UL":"DIV");_16.containerNode.className="mblRoundRectContainer";if(_16.srcNodeRef){_16.srcNodeRef.parentNode.replaceChild(_16.domNode,_16.srcNodeRef);for(i=0,len=_16.srcNodeRef.childNodes.length;i<len;i++){_16.containerNode.appendChild(_16.srcNodeRef.removeChild(_16.srcNodeRef.firstChild));}_16.srcNodeRef=null;}_16.domNode.appendChild(_16.containerNode);for(i=0;i<=5;i++){var top=dojo.create("DIV");top.className="mblRoundCorner mblRoundCorner"+i+"T";_16.domNode.insertBefore(top,_16.containerNode);var _18=dojo.create("DIV");_18.className="mblRoundCorner mblRoundCorner"+i+"B";_16.domNode.appendChild(_18);}}});if(dojox.mobile.ScrollableView){dojo.extend(dojox.mobile.ScrollableView,{postCreate:function(){var _19=dojo.create("DIV",{className:"mblDummyForIE",innerHTML:"&nbsp;"},this.containerNode,"first");dojo.style(_19,{position:"relative",marginBottom:"-2px",fontSize:"1px"});}});}}if(dojo.isIE<=6){dojox.mobile.applyPngFilter=function(_1a){_1a=_1a||dojo.body();var _1b=_1a.getElementsByTagName("IMG");var _1c=dojo.moduleUrl("dojo","resources/blank.gif");for(var i=0,len=_1b.length;i<len;i++){var img=_1b[i];var w=img.offsetWidth;var h=img.offsetHeight;if(w===0||h===0){if(dojo.style(img,"display")!="none"){continue;}img.style.display="";w=img.offsetWidth;h=img.offsetHeight;img.style.display="none";if(w===0||h===0){continue;}}var src=img.src;if(src.indexOf("resources/blank.gif")!=-1){continue;}img.src=_1c;img.runtimeStyle.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+src+"')";img.style.width=w+"px";img.style.height=h+"px";}};}dojox.mobile.loadCssFile=function(_1d){if(dojo.doc.createStyleSheet){setTimeout(function(_1e){return function(){dojo.doc.createStyleSheet(_1e);};}(_1d),0);}else{dojo.create("LINK",{href:_1d,type:"text/css",rel:"stylesheet"},dojo.doc.getElementsByTagName("head")[0]);}};dojox.mobile.loadCss=function(_1f){if(!dojo.global._loadedCss){var obj={};dojo.forEach(dojox.mobile.getCssPaths(),function(_20){obj[_20]=true;});dojo.global._loadedCss=obj;}if(!dojo.isArray(_1f)){_1f=[_1f];}for(var i=0;i<_1f.length;i++){var _21=_1f[i];if(!dojo.global._loadedCss[_21]){dojo.global._loadedCss[_21]=true;dojox.mobile.loadCssFile(_21);}}};dojox.mobile.getCssPaths=function(){var _22=[];var i,j;var s=dojo.doc.styleSheets;for(i=0;i<s.length;i++){if(s[i].href){continue;}var r=s[i].cssRules||s[i].imports;if(!r){continue;}for(j=0;j<r.length;j++){if(r[j].href){_22.push(r[j].href);}}}var _23=dojo.doc.getElementsByTagName("link");for(i=0,len=_23.length;i<len;i++){if(_23[i].href){_22.push(_23[i].href);}}return _22;};dojox.mobile.loadCompatPattern=/\/mobile\/themes\/.*\.css$/;dojox.mobile.loadCompatCssFiles=function(){var _24=dojox.mobile.getCssPaths();for(var i=0;i<_24.length;i++){var _25=_24[i];if((_25.match(dojox.mobile.loadCompatPattern)||location.href.indexOf("mobile/tests/"))&&_25.indexOf("-compat.css")==-1){var _26=_25.substring(0,_25.length-4)+"-compat.css";dojox.mobile.loadCss(_26);}}};dojox.mobile.hideAddressBar=function(evt,_27){if(_27!==false){dojox.mobile.resizeAll();}};dojo.addOnLoad(function(){if(dojo.config["mblLoadCompatCssFiles"]!==false){setTimeout(function(){dojox.mobile.loadCompatCssFiles();},0);}if(dojox.mobile.applyPngFilter){dojox.mobile.applyPngFilter();}});}return dojox.mobile.compat;});