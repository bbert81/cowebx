/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

define(["dojo/_base/array","dojo/_base/html","./common","dijit/_WidgetBase","dijit/_Container","dijit/_Contained","./Heading","./_ItemBase","./TabBarButton"],function(_1,_2,_3,_4,_5,_6,_7,_8){return dojo.declare("dojox.mobile.TabBar",[dijit._WidgetBase,dijit._Container,dijit._Contained],{iconBase:"",iconPos:"",barType:"tabBar",inHeading:false,tag:"UL",_fixedButtonWidth:76,_fixedButtonMargin:17,_largeScreenWidth:500,buildRendering:function(){this._clsName=this.barType=="segmentedControl"?"mblTabButton":"mblTabBarButton";this.domNode=this.containerNode=this.srcNodeRef||dojo.create(this.tag);this.domNode.className=this.barType=="segmentedControl"?"mblTabPanelHeader":"mblTabBar";},startup:function(){if(this._started){return;}var _9=this;setTimeout(function(){_9.resize();},0);this.inherited(arguments);},resize:function(_a){var i,w;if(_a&&_a.w){dojo.marginBox(this.domNode,_a);w=_a.w;}else{w=dojo.style(this.domNode,"position")==="absolute"?dojo.contentBox(this.domNode).w:dojo.marginBox(this.domNode).w;}var bw=this._fixedButtonWidth;var bm=this._fixedButtonMargin;var _b=this.containerNode.childNodes;var _c=[];for(i=0;i<_b.length;i++){var c=_b[i];if(c.nodeType!=1){continue;}if(dojo.hasClass(c,this._clsName)){_c.push(c);}}var _d;if(this.barType=="segmentedControl"){_d=w;var _e=0;for(i=0;i<_c.length;i++){_d-=dojo.marginBox(_c[i]).w;_c[i].style.marginTop="3px";_e+=_c[i].offsetWidth;}_d=Math.floor(_d/2);var _f=this.getParent();var _10=this.inHeading||_f instanceof dojox.mobile.Heading;this.containerNode.style.padding="3px 0px 0px "+(_10?0:_d)+"px";if(_10){dojo.style(this.domNode,{background:"none",border:"none",width:_e+2+"px"});}}else{_d=Math.floor((w-(bw+bm*2)*_c.length)/2);if(w<this._largeScreenWidth||_d<0){for(i=0;i<_c.length;i++){_c[i].style.width=Math.round(98/_c.length)+"%";_c[i].style.margin="0px";}this.containerNode.style.padding="0px 0px 0px 1%";}else{for(i=0;i<_c.length;i++){_c[i].style.width=bw+"px";_c[i].style.margin="0 "+bm+"px";}this.containerNode.style.padding="0px 0px 0px "+_d+"px";}}if(!dojo.some(this.getChildren(),function(_11){return _11.iconNode1;})){dojo.addClass(this.domNode,"mblTabBarNoIcons");}if(!dojo.some(this.getChildren(),function(_12){return _12.label;})){dojo.addClass(this.domNode,"mblTabBarNoText");}}});});