/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

define(["dojo/_base/array","dojo/_base/html","./common","./_ItemBase"],function(_1,_2,_3,_4){return dojo.declare("dojox.mobile.TabBarButton",[dojox.mobile._ItemBase],{icon1:"",icon2:"",iconPos1:"",iconPos2:"",selected:false,transition:"none",tag:"LI",selectOne:true,inheritParams:function(){var _5=this.getParent();if(_5){if(!this.transition){this.transition=_5.transition;}if(this.icon1&&_5.iconBase&&_5.iconBase.charAt(_5.iconBase.length-1)==="/"){this.icon1=_5.iconBase+this.icon1;}if(!this.icon1){this.icon1=_5.iconBase;}if(!this.iconPos1){this.iconPos1=_5.iconPos;}if(this.icon2&&_5.iconBase&&_5.iconBase.charAt(_5.iconBase.length-1)==="/"){this.icon2=_5.iconBase+this.icon2;}if(!this.icon2){this.icon2=_5.iconBase||this.icon1;}if(!this.iconPos2){this.iconPos2=_5.iconPos||this.iconPos1;}}},buildRendering:function(){var a=this.anchorNode=dojo.create("A",{className:"mblTabBarButtonAnchor"});this.connect(a,"onclick","onClick");var _6=dojo.create("DIV",{className:"mblTabBarButtonDiv"},a);var _7=this.innerDivNode=dojo.create("DIV",{className:"mblTabBarButtonDiv mblTabBarButtonDivInner"},_6);this.box=dojo.create("DIV",{className:"mblTabBarButtonTextBox"},a);var _8=this.box;var _9="";var r=this.srcNodeRef;if(r){for(var i=0,_a=r.childNodes.length;i<_a;i++){var n=r.firstChild;if(n.nodeType===3){_9+=dojo.trim(n.nodeValue);n.nodeValue=this._cv(n.nodeValue);}_8.appendChild(n);}}if(this.label){_8.appendChild(dojo.doc.createTextNode(this._cv(this.label)));}else{this.label=_9;}this.domNode=this.srcNodeRef||dojo.create(this.tag);this.containerNode=this.domNode;this.domNode.appendChild(a);if(this.domNode.className.indexOf("mblDomButton")!=-1){var _b=dojo.create("DIV",null,a);dojox.mobile.createDomButton(this.domNode,null,_b);dojo.addClass(this.domNode,"mblTabButtonDomButton");}},startup:function(){if(this._started){return;}this.inheritParams();var _c=this.getParent();var _d=_c?_c._clsName:"mblTabBarButton";dojo.addClass(this.domNode,_d+(this.selected?" mblTabButtonSelected":""));if(_c&&_c.barType=="segmentedControl"){dojo.removeClass(this.domNode,"mblTabBarButton");dojo.addClass(this.domNode,_c._clsName);this.box.className="";}this.set({icon1:this.icon1,icon2:this.icon2});this.inherited(arguments);},select:function(_e){if(_e){this.selected=false;dojo.removeClass(this.domNode,"mblTabButtonSelected");}else{this.selected=true;dojo.addClass(this.domNode,"mblTabButtonSelected");for(var i=0,c=this.domNode.parentNode.childNodes;i<c.length;i++){if(c[i].nodeType!=1){continue;}var w=dijit.byNode(c[i]);if(w&&w!=this){w.select(true);}}}if(this.iconNode1){this.iconNode1.style.visibility=this.selected?"hidden":"";}if(this.iconNode2){this.iconNode2.style.visibility=this.selected?"":"hidden";}},onClick:function(e){this.defaultClickAction();},_setIcon:function(_f,pos,num,sel){var i="icon"+num,n="iconNode"+num,p="iconPos"+num;if(_f){this[i]=_f;}if(pos){if(this[p]===pos){return;}this[p]=pos;}var div=this.innerDivNode;if(_f&&_f.indexOf("mblDomButton")===0){if(!this[n]){this[n]=dojo.create("DIV",null,div);}this[n].className=_f+" mblTabBarButtonIcon";dojox.mobile.createDomButton(this[n]);dojo.removeClass(div,"mblTabBarButtonNoIcon");}else{if(_f&&_f!="none"){if(!this[n]){this[n]=dojo.create("IMG",{className:"mblTabBarButtonIcon",alt:this.alt},div);}this[n].src=_f;this[n].style.visibility=sel?"hidden":"";dojox.mobile.setupIcon(this[n],this[p]);this[n].onload=function(){var _10=this.style.display;this.style.display="none";this.style.display=_10;};}else{dojo.addClass(div,"mblTabBarButtonNoIcon");}}},_setIcon1Attr:function(_11){this._setIcon(_11,null,1,this.selected);},_setIcon2Attr:function(_12){this._setIcon(_12,null,2,!this.selected);},_setIconPos1Attr:function(pos){this._setIcon(null,pos,1,this.selected);},_setIconPos2Attr:function(pos){this._setIcon(null,pos,2,!this.selected);}});});