/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

define(["dojo/_base/kernel","dojo/_base/declare","dojox/geo/openlayers/tests/sun/Sun","dojox/geo/openlayers/widget/Map","dojox/geo/openlayers/GfxLayer","dojox/geo/openlayers/GeometryFeature","dojox/geo/openlayers/LineString","dojox/geo/openlayers/Point","dojox/geo/openlayers/JsonImport"],function(_1,_2){return _1.declare("dojox.geo.openlayers.tests.sun.SunDemo",[],{constructor:function(_3){var _4={name:"TheMap",touchHandler:true};var _5=new dojox.geo.openlayers.widget.Map();_1.place(_5.domNode,_3);_5.startup();_5.map.fitTo([-160,70,160,-70]);this.map=_5;this.sun=new dojox.geo.openlayers.tests.sun.Sun();var _6=new dojox.geo.openlayers.GfxLayer();var f=this.twilightZone({x1:-180,y1:85,x2:180,y2:-85});_6.addFeature(f);f=this.createStar();_6.addFeature(f);f=this.createSun();_6.addFeature(f);this.map.map.addLayer(_6);},twilightZone:function(_7){var tz=this.sun.twilightZone(_7);var g=new dojox.geo.openlayers.LineString(tz);var gf=new dojox.geo.openlayers.GeometryFeature(g);gf.setStroke([248,236,56]);gf.setFill([252,251,45,0.3]);return gf;},makeStarShape:function(r1,r2,b){var _8=Math.PI*2;var di=_8/b;var s=null;var _9=Math.PI;var _a=_9+_8;for(var i=_9;i<_a;i+=di){var c1=Math.cos(i);var s1=Math.sin(i);var i2=i+di/2;var c2=Math.cos(i2);var s2=Math.sin(i2);if(s==null){s="M"+(s1*r1).toFixed(2)+","+(c1*r1).toFixed(2)+" ";}else{s+="L"+(s1*r1).toFixed(2)+","+(c1*r1).toFixed(2)+" ";}s+="L"+(s2*r2).toFixed(2)+","+(c2*r2).toFixed(2)+" ";}s+="z";return s;},createStar:function(){var s=this.sun.sun();var _b=new dojox.geo.openlayers.Point(s);var gf=new dojox.geo.openlayers.GeometryFeature(_b);gf.createShape=_1.hitch(this,function(s){var g=s.createGroup();var r1=30;var r2=10;var _c=7;var _d=this.makeStarShape(r1,r2,_c);var _e=s.createPath();_e.setShape({path:_d});_e.setStroke([0,100,0]);g.add(_e);return g;});return gf;},makeCrossShape:function(r1,r2,b){var _f=Math.PI*2;var di=_f/b;var s="";for(var i=0;i<_f;i+=di){var c1=Math.cos(i);var s1=Math.sin(i);var i2=i+Math.PI;var c2=Math.cos(i2);var s2=Math.sin(i2);s+="M"+(s1*r1).toFixed(2)+","+(c1*r1).toFixed(2)+" ";s+="L"+(s2*r1).toFixed(2)+","+(c2*r1).toFixed(2)+" ";}return s;},createSun:function(){var s=this.sun.sun();var g=new dojox.geo.openlayers.Point({x:s.x,y:s.y});var gf=new dojox.geo.openlayers.GeometryFeature(g);gf.setShapeProperties({r:15});gf.setStroke("");gf.setFill({type:"radial",r:15,colors:[{offset:0,color:[248,236,100]},{offset:1,color:[255,255,255,0.4]}]});return gf;}});});