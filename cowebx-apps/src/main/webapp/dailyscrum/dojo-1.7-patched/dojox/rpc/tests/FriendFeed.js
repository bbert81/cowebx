/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

define(["dojo","dijit","dojox","dojo/io/script","dojox/rpc/Service"],function(_1,_2,_3){_1.getObject("dojox.rpc.tests.FriendFeed",1);(function(){_1.declare("dojox.rpc.tests.FFTest",null,{name:"",timeout:8000,constructor:function(_4,_5,_6,fn){var _7={name:_4,_method:_5,_parameters:_6,_test:fn};_1.mixin(this,_7);return this;},setUp:function(){this.service=new _3.rpc.Service(_1.moduleUrl("dojox.rpc.SMDLibrary","friendfeed.smd"));},runTest:function(t){var d=new doh.Deferred();var ff=this.service[this._method](this._parameters);ff.addCallback(this,function(_8){if(_8.errorCode){d.errback(new Error("Test failed",_8));}else{if(this._test(_8)){d.callback(true);}else{d.errback(new Error("Test failed ",_8));}}return d;});},tearDown:function(){this.service=undefined;}});doh.register("dojox.rpc.tests.friendfeed",[new _3.rpc.tests.FFTest("#1 Users","users",{nickname:"paul"},function(_9){return _9.entries;}),new _3.rpc.tests.FFTest("#2 Search","search",{q:"dojo"},function(_a){return _a.entries;}),new _3.rpc.tests.FFTest("#3 Domain","entry",{entry_id:"245da66c-d6dd-8a4b-1719-b5bfb1f9d5eb"},function(_b){return _b.entries&&_b.entries.length==1;}),new _3.rpc.tests.FFTest("#4 URL","url",{url:"http://blog.medryx.org/tag/doh/"},function(_c){return _c.entries&&_c.entries.length>=1;}),new _3.rpc.tests.FFTest("#5 Domain","domain",{domain:"dojotoolkit.org"},function(_d){return _d.entries&&_d.entries.length>=1;}),new _3.rpc.tests.FFTest("#6 Parameter - service","users",{nickname:"paul",service:"twitter"},function(_e){var _f=_1.filter(_e.entries,function(_10){return _10.service.id!="twitter";});return _f.length==0;}),new _3.rpc.tests.FFTest("#7 Parameter - num","users",{nickname:"paul",num:42},function(_11){return _11.length==42;})]);})();});require(["dojox/rpc/tests/FriendFeed"]);