/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

define(["../_base/kernel","../_base/html","../_base/sniff","../_base/array","../_base/lang","../_base/event","../_base/url","../_base/unload"],function(_1){var _2=(/Trident/.test(window.navigator.userAgent));if(_2){var _3=["log","info","debug","warn","error"];for(var i=0;i<_3.length;i++){var m=_3[i];if(!console[m]||console[m]._fake){continue;}var n="_"+_3[i];console[n]=console[m];console[m]=(function(){var _4=n;return function(){console[_4](Array.prototype.join.call(arguments," "));};})();}try{console.clear();}catch(e){}}if(_1.isFF||_1.isChrome||_1.isSafari||_2||window.firebug||(typeof console!="undefined"&&console.firebug)||_1.config.useCustomLogger||_1.isAIR){return;}try{if(window!=window.parent){if(window.parent["console"]){window.console=window.parent.console;}return;}}catch(e){}var _5=document;var _6=window;var _7=0;var _8=null;var _9=null;var _a=null;var _b=null;var _c=null;var _d=null;var _e=false;var _f=[];var _10=[];var _11={};var _12={};var _13=null;var _14;var _15;var _16=false;var _17=null;var _18=document.createElement("div");var _19;var _1a;window.console={_connects:[],log:function(){_1b(arguments,"");},debug:function(){_1b(arguments,"debug");},info:function(){_1b(arguments,"info");},warn:function(){_1b(arguments,"warning");},error:function(){_1b(arguments,"error");},assert:function(_1c,_1d){if(!_1c){var _1e=[];for(var i=1;i<arguments.length;++i){_1e.push(arguments[i]);}_1b(_1e.length?_1e:["Assertion Failure"],"error");throw _1d?_1d:"Assertion Failure";}},dir:function(obj){var str=_1f(obj);str=str.replace(/\n/g,"<br />");str=str.replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;");_20([str],"dir");},dirxml:function(_21){var _22=[];_23(_21,_22);_20(_22,"dirxml");},group:function(){_20(arguments,"group",_24);},groupEnd:function(){_20(arguments,"",_25);},time:function(_26){_11[_26]=new Date().getTime();},timeEnd:function(_27){if(_27 in _11){var _28=(new Date()).getTime()-_11[_27];_1b([_27+":",_28+"ms"]);delete _11[_27];}},count:function(_29){if(!_12[_29]){_12[_29]=0;}_12[_29]++;_1b([_29+": "+_12[_29]]);},trace:function(_2a){var _2b=_2a||3;var f=console.trace.caller;for(var i=0;i<_2b;i++){var _2c=f.toString();var _2d=[];for(var a=0;a<f.arguments.length;a++){_2d.push(f.arguments[a]);}if(f.arguments.length){}else{}f=f.caller;}},profile:function(){this.warn(["profile() not supported."]);},profileEnd:function(){},clear:function(){if(_9){while(_9.childNodes.length){_1.destroy(_9.firstChild);}}_1.forEach(this._connects,_1.disconnect);},open:function(){_2e(true);},close:function(){if(_e){_2e();}},_restoreBorder:function(){if(_19){_19.style.border=_1a;}},openDomInspector:function(){_16=true;_9.style.display="none";_13.style.display="block";_a.style.display="none";document.body.style.cursor="pointer";_14=_1.connect(document,"mousemove",function(evt){if(!_16){return;}if(!_17){_17=setTimeout(function(){_17=null;},50);}else{return;}var _2f=evt.target;if(_2f&&(_19!==_2f)){var _30=true;console._restoreBorder();var _31=[];_23(_2f,_31);_13.innerHTML=_31.join("");_19=_2f;_1a=_19.style.border;_19.style.border="#0000FF 1px solid";}});setTimeout(function(){_15=_1.connect(document,"click",function(evt){document.body.style.cursor="";_16=!_16;_1.disconnect(_15);});},30);},_closeDomInspector:function(){document.body.style.cursor="";_1.disconnect(_14);_1.disconnect(_15);_16=false;console._restoreBorder();},openConsole:function(){_9.style.display="block";_13.style.display="none";_a.style.display="none";console._closeDomInspector();},openObjectInspector:function(){_9.style.display="none";_13.style.display="none";_a.style.display="block";console._closeDomInspector();},recss:function(){var i,a,s;a=document.getElementsByTagName("link");for(i=0;i<a.length;i++){s=a[i];if(s.rel.toLowerCase().indexOf("stylesheet")>=0&&s.href){var h=s.href.replace(/(&|%5C?)forceReload=\d+/,"");s.href=h+(h.indexOf("?")>=0?"&":"?")+"forceReload="+new Date().valueOf();}}}};function _2e(_32){_e=_32||!_e;if(_8){_8.style.display=_e?"block":"none";}};function _33(){_2e(true);if(_c){_c.focus();}};function _34(x,y,w,h){var win=window.open("","_firebug","status=0,menubar=0,resizable=1,top="+y+",left="+x+",width="+w+",height="+h+",scrollbars=1,addressbar=0");if(!win){var msg="Firebug Lite could not open a pop-up window, most likely because of a blocker.\n"+"Either enable pop-ups for this domain, or change the djConfig to popup=false.";alert(msg);}_35(win);var _36=win.document;var _37="<html style=\"height:100%;\"><head><title>Firebug Lite</title></head>\n"+"<body bgColor=\"#ccc\" style=\"height:97%;\" onresize=\"opener.onFirebugResize()\">\n"+"<div id=\"fb\"></div>"+"</body></html>";_36.write(_37);_36.close();return win;};function _35(wn){var d=new Date();d.setTime(d.getTime()+(60*24*60*60*1000));d=d.toUTCString();var dc=wn.document,_38;if(wn.innerWidth){_38=function(){return {w:wn.innerWidth,h:wn.innerHeight};};}else{if(dc.documentElement&&dc.documentElement.clientWidth){_38=function(){return {w:dc.documentElement.clientWidth,h:dc.documentElement.clientHeight};};}else{if(dc.body){_38=function(){return {w:dc.body.clientWidth,h:dc.body.clientHeight};};}}}window.onFirebugResize=function(){_46(_38().h);clearInterval(wn._firebugWin_resize);wn._firebugWin_resize=setTimeout(function(){var x=wn.screenLeft,y=wn.screenTop,w=wn.outerWidth||wn.document.body.offsetWidth,h=wn.outerHeight||wn.document.body.offsetHeight;document.cookie="_firebugPosition="+[x,y,w,h].join(",")+"; expires="+d+"; path=/";},5000);};};function _39(){if(_8){return;}_2e(true);if(_1.config.popup){var _3a="100%";var _3b=document.cookie.match(/(?:^|; )_firebugPosition=([^;]*)/);var p=_3b?_3b[1].split(","):[2,2,320,480];_6=_34(p[0],p[1],p[2],p[3]);_5=_6.document;_1.config.debugContainerId="fb";_6.console=window.console;_6.dojo=window.dojo;}else{_5=document;_3a=(_1.config.debugHeight||300)+"px";}var _3c=_5.createElement("link");_3c.href=_1.moduleUrl("dojo._firebug","firebug.css")+"";_3c.rel="stylesheet";_3c.type="text/css";var _3d=_5.getElementsByTagName("head");if(_3d){_3d=_3d[0];}if(!_3d){_3d=_5.getElementsByTagName("html")[0];}if(_1.isIE){window.setTimeout(function(){_3d.appendChild(_3c);},0);}else{_3d.appendChild(_3c);}if(_1.config.debugContainerId){_8=_5.getElementById(_1.config.debugContainerId);}if(!_8){_8=_5.createElement("div");_5.body.appendChild(_8);}_8.className+=" firebug";_8.style.height=_3a;_8.style.display=(_e?"block":"none");var _3e=function(_3f,_40,_41,_42){return "<li class=\""+_42+"\"><a href=\"javascript:void(0);\" onclick=\"console."+_41+"(); return false;\" title=\""+_40+"\">"+_3f+"</a></li>";};_8.innerHTML="<div id=\"firebugToolbar\">"+"  <ul id=\"fireBugTabs\" class=\"tabs\">"+_3e("Clear","Remove All Console Logs","clear","")+_3e("ReCSS","Refresh CSS without reloading page","recss","")+_3e("Console","Show Console Logs","openConsole","gap")+_3e("DOM","Show DOM Inspector","openDomInspector","")+_3e("Object","Show Object Inspector","openObjectInspector","")+((_1.config.popup)?"":_3e("Close","Close the console","close","gap"))+"\t</ul>"+"</div>"+"<input type=\"text\" id=\"firebugCommandLine\" />"+"<div id=\"firebugLog\"></div>"+"<div id=\"objectLog\" style=\"display:none;\">Click on an object in the Log display</div>"+"<div id=\"domInspect\" style=\"display:none;\">Hover over HTML elements in the main page. Click to hold selection.</div>";_d=_5.getElementById("firebugToolbar");_c=_5.getElementById("firebugCommandLine");_43(_c,"keydown",_44);_43(_5,_1.isIE||_1.isSafari?"keydown":"keypress",_45);_9=_5.getElementById("firebugLog");_a=_5.getElementById("objectLog");_13=_5.getElementById("domInspect");_b=_5.getElementById("fireBugTabs");_46();_47();};_1.addOnLoad(_39);function _48(){_5=null;if(_6.console){_6.console.clear();}_6=null;_8=null;_9=null;_a=null;_13=null;_c=null;_f=[];_10=[];_11={};};function _49(){var _4a=_c.value;_c.value="";_20([">  ",_4a],"command");var _4b;try{_4b=eval(_4a);}catch(e){}};function _46(h){var _4c=25;var _4d=h?h-(_4c+_c.offsetHeight+25+(h*0.01))+"px":(_8.offsetHeight-_4c-_c.offsetHeight)+"px";_9.style.top=_4c+"px";_9.style.height=_4d;_a.style.height=_4d;_a.style.top=_4c+"px";_13.style.height=_4d;_13.style.top=_4c+"px";_c.style.bottom=0;_1.addOnWindowUnload(_48);};function _20(_4e,_4f,_50){if(_9){_51(_4e,_4f,_50);}else{_f.push([_4e,_4f,_50]);}};function _47(){var _52=_f;_f=[];for(var i=0;i<_52.length;++i){_51(_52[i][0],_52[i][1],_52[i][2]);}};function _51(_53,_54,_55){var _56=_9.scrollTop+_9.offsetHeight>=_9.scrollHeight;_55=_55||_57;_55(_53,_54);if(_56){_9.scrollTop=_9.scrollHeight-_9.offsetHeight;}};function _58(row){var _59=_10.length?_10[_10.length-1]:_9;_59.appendChild(row);};function _57(_5a,_5b){var row=_9.ownerDocument.createElement("div");row.className="logRow"+(_5b?" logRow-"+_5b:"");row.innerHTML=_5a.join("");_58(row);};function _24(_5c,_5d){_1b(_5c,_5d);var _5e=_9.ownerDocument.createElement("div");_5e.className="logGroupBox";_58(_5e);_10.push(_5e);};function _25(){_10.pop();};function _1b(_5f,_60){var _61=[];var _62=_5f[0];var _63=0;if(typeof (_62)!="string"){_62="";_63=-1;}var _64=_65(_62);for(var i=0;i<_64.length;++i){var _66=_64[i];if(_66&&typeof _66=="object"){_66.appender(_5f[++_63],_61);}else{_67(_66,_61);}}var ids=[];var obs=[];for(i=_63+1;i<_5f.length;++i){_67(" ",_61);var _68=_5f[i];if(_68===undefined||_68===null){_69(_68,_61);}else{if(typeof (_68)=="string"){_67(_68,_61);}else{if(_68 instanceof Date){_67(_68.toString(),_61);}else{if(_68.nodeType==9){_67("[ XmlDoc ]",_61);}else{var id="_a"+_7++;ids.push(id);obs.push(_68);var str="<a id=\""+id+"\" href=\"javascript:void(0);\">"+_6a(_68)+"</a>";_6b(str,_61);}}}}}_20(_61,_60);for(i=0;i<ids.length;i++){var btn=_5.getElementById(ids[i]);if(!btn){continue;}btn.obj=obs[i];_6.console._connects.push(_1.connect(btn,"onclick",function(){console.openObjectInspector();try{_1f(this.obj);}catch(e){this.obj=e;}_a.innerHTML="<pre>"+_1f(this.obj)+"</pre>";}));}};function _65(_6c){var _6d=[];var reg=/((^%|[^\\]%)(\d+)?(\.)([a-zA-Z]))|((^%|[^\\]%)([a-zA-Z]))/;var _6e={s:_67,d:_6f,i:_6f,f:_70};for(var m=reg.exec(_6c);m;m=reg.exec(_6c)){var _71=m[8]?m[8]:m[5];var _72=_71 in _6e?_6e[_71]:_73;var _74=m[3]?parseInt(m[3]):(m[4]=="."?-1:0);_6d.push(_6c.substr(0,m[0][0]=="%"?m.index:m.index+1));_6d.push({appender:_72,precision:_74});_6c=_6c.substr(m.index+m[0].length);}_6d.push(_6c);return _6d;};function _75(_76){function _77(ch){switch(ch){case "<":return "&lt;";case ">":return "&gt;";case "&":return "&amp;";case "'":return "&#39;";case "\"":return "&quot;";}return "?";};return String(_76).replace(/[<>&"']/g,_77);};function _78(_79){try{return _79+"";}catch(e){return null;}};function _6b(_7a,_7b){_7b.push(_78(_7a));};function _67(_7c,_7d){_7d.push(_75(_78(_7c)));};function _69(_7e,_7f){_7f.push("<span class=\"objectBox-null\">",_75(_78(_7e)),"</span>");};function _80(_81,_82){_82.push("<span class=\"objectBox-string\">&quot;",_75(_78(_81)),"&quot;</span>");};function _6f(_83,_84){_84.push("<span class=\"objectBox-number\">",_75(_78(_83)),"</span>");};function _70(_85,_86){_86.push("<span class=\"objectBox-number\">",_75(_78(_85)),"</span>");};function _87(_88,_89){_89.push("<span class=\"objectBox-function\">",_6a(_88),"</span>");};function _73(_8a,_8b){try{if(_8a===undefined){_69("undefined",_8b);}else{if(_8a===null){_69("null",_8b);}else{if(typeof _8a=="string"){_80(_8a,_8b);}else{if(typeof _8a=="number"){_6f(_8a,_8b);}else{if(typeof _8a=="function"){_87(_8a,_8b);}else{if(_8a.nodeType==1){_8c(_8a,_8b);}else{if(typeof _8a=="object"){_8d(_8a,_8b);}else{_67(_8a,_8b);}}}}}}}}catch(e){}};function _8d(_8e,_8f){var _90=_78(_8e);var _91=/\[object (.*?)\]/;var m=_91.exec(_90);_8f.push("<span class=\"objectBox-object\">",m?m[1]:_90,"</span>");};function _8c(_92,_93){_93.push("<span class=\"objectBox-selector\">");_93.push("<span class=\"selectorTag\">",_75(_92.nodeName.toLowerCase()),"</span>");if(_92.id){_93.push("<span class=\"selectorId\">#",_75(_92.id),"</span>");}if(_92.className){_93.push("<span class=\"selectorClass\">.",_75(_92.className),"</span>");}_93.push("</span>");};function _23(_94,_95){if(_94.nodeType==1){_95.push("<div class=\"objectBox-element\">","&lt;<span class=\"nodeTag\">",_94.nodeName.toLowerCase(),"</span>");for(var i=0;i<_94.attributes.length;++i){var _96=_94.attributes[i];if(!_96.specified){continue;}_95.push("&nbsp;<span class=\"nodeName\">",_96.nodeName.toLowerCase(),"</span>=&quot;<span class=\"nodeValue\">",_75(_96.nodeValue),"</span>&quot;");}if(_94.firstChild){_95.push("&gt;</div><div class=\"nodeChildren\">");for(var _97=_94.firstChild;_97;_97=_97.nextSibling){_23(_97,_95);}_95.push("</div><div class=\"objectBox-element\">&lt;/<span class=\"nodeTag\">",_94.nodeName.toLowerCase(),"&gt;</span></div>");}else{_95.push("/&gt;</div>");}}else{if(_94.nodeType==3){_95.push("<div class=\"nodeText\">",_75(_94.nodeValue),"</div>");}}};function _43(_98,_99,_9a){if(document.all){_98.attachEvent("on"+_99,_9a);}else{_98.addEventListener(_99,_9a,false);}};function _9b(_9c,_9d,_9e){if(document.all){_9c.detachEvent("on"+_9d,_9e);}else{_9c.removeEventListener(_9d,_9e,false);}};function _9f(_a0){if(document.all){_a0.cancelBubble=true;}else{_a0.stopPropagation();}};function _a1(msg,_a2,_a3){var _a4=_a2.lastIndexOf("/");var _a5=_a4==-1?_a2:_a2.substr(_a4+1);var _a6=["<span class=\"errorMessage\">",msg,"</span>","<div class=\"objectBox-sourceLink\">",_a5," (line ",_a3,")</div>"];_20(_a6,"error");};var _a7=new Date().getTime();function _45(_a8){var _a9=(new Date()).getTime();if(_a9>_a7+200){_a8=_1.fixEvent(_a8);var _aa=_1.keys;var ekc=_a8.keyCode;_a7=_a9;if(ekc==_aa.F12){_2e();}else{if((ekc==_aa.NUMPAD_ENTER||ekc==76)&&_a8.shiftKey&&(_a8.metaKey||_a8.ctrlKey)){_33();}else{return;}}_9f(_a8);}};function _44(e){var dk=_1.keys;if(e.keyCode==13&&_c.value){_ab(_c.value);_49();}else{if(e.keyCode==27){_c.value="";}else{if(e.keyCode==dk.UP_ARROW||e.charCode==dk.UP_ARROW){_ac("older");}else{if(e.keyCode==dk.DOWN_ARROW||e.charCode==dk.DOWN_ARROW){_ac("newer");}else{if(e.keyCode==dk.HOME||e.charCode==dk.HOME){_ad=1;_ac("older");}else{if(e.keyCode==dk.END||e.charCode==dk.END){_ad=999999;_ac("newer");}}}}}}};var _ad=-1;var _ae=null;function _ab(_af){var _b0=_b1("firebug_history");_b0=(_b0)?_1.fromJson(_b0):[];var pos=_1.indexOf(_b0,_af);if(pos!=-1){_b0.splice(pos,1);}_b0.push(_af);_b1("firebug_history",_1.toJson(_b0),30);while(_b0.length&&!_b1("firebug_history")){_b0.shift();_b1("firebug_history",_1.toJson(_b0),30);}_ae=null;_ad=-1;};function _ac(_b2){var _b3=_b1("firebug_history");_b3=(_b3)?_1.fromJson(_b3):[];if(!_b3.length){return;}if(_ae===null){_ae=_c.value;}if(_ad==-1){_ad=_b3.length;}if(_b2=="older"){--_ad;if(_ad<0){_ad=0;}}else{if(_b2=="newer"){++_ad;if(_ad>_b3.length){_ad=_b3.length;}}}if(_ad==_b3.length){_c.value=_ae;_ae=null;}else{_c.value=_b3[_ad];}};function _b1(_b4,_b5){var c=document.cookie;if(arguments.length==1){var _b6=c.match(new RegExp("(?:^|; )"+_b4+"=([^;]*)"));return _b6?decodeURIComponent(_b6[1]):undefined;}else{var d=new Date();d.setMonth(d.getMonth()+1);document.cookie=_b4+"="+encodeURIComponent(_b5)+((d.toUtcString)?"; expires="+d.toUTCString():"");}};function _b7(it){return it&&it instanceof Array||typeof it=="array";};function _b8(o){var cnt=0;for(var nm in o){cnt++;}return cnt;};function _1f(o,i,txt,_b9){var ind=" \t";txt=txt||"";i=i||ind;_b9=_b9||[];var _ba;if(o&&o.nodeType==1){var _bb=[];_23(o,_bb);return _bb.join("");}var br=",\n",cnt=0,_bc=_b8(o);if(o instanceof Date){return i+o.toString()+br;}looking:for(var nm in o){cnt++;if(cnt==_bc){br="\n";}if(o[nm]===window||o[nm]===document){}else{if(o[nm]===null){txt+=i+nm+" : NULL"+br;}else{if(o[nm]&&o[nm].nodeType){if(o[nm].nodeType==1){}else{if(o[nm].nodeType==3){txt+=i+nm+" : [ TextNode "+o[nm].data+" ]"+br;}}}else{if(typeof o[nm]=="object"&&(o[nm] instanceof String||o[nm] instanceof Number||o[nm] instanceof Boolean)){txt+=i+nm+" : "+o[nm]+","+br;}else{if(o[nm] instanceof Date){txt+=i+nm+" : "+o[nm].toString()+br;}else{if(typeof (o[nm])=="object"&&o[nm]){for(var j=0,_bd;_bd=_b9[j];j++){if(o[nm]===_bd){txt+=i+nm+" : RECURSION"+br;continue looking;}}_b9.push(o[nm]);_ba=(_b7(o[nm]))?["[","]"]:["{","}"];txt+=i+nm+" : "+_ba[0]+"\n";txt+=_1f(o[nm],i+ind,"",_b9);txt+=i+_ba[1]+br;}else{if(typeof o[nm]=="undefined"){txt+=i+nm+" : undefined"+br;}else{if(nm=="toString"&&typeof o[nm]=="function"){var _be=o[nm]();if(typeof _be=="string"&&_be.match(/function ?(.*?)\(/)){_be=_75(_6a(o[nm]));}txt+=i+nm+" : "+_be+br;}else{txt+=i+nm+" : "+_75(_6a(o[nm]))+br;}}}}}}}}}return txt;};function _6a(obj){var _bf=(obj instanceof Error);if(obj.nodeType==1){return _75("< "+obj.tagName.toLowerCase()+" id=\""+obj.id+"\" />");}if(obj.nodeType==3){return _75("[TextNode: \""+obj.nodeValue+"\"]");}var nm=(obj&&(obj.id||obj.name||obj.ObjectID||obj.widgetId));if(!_bf&&nm){return "{"+nm+"}";}var _c0=2;var _c1=4;var cnt=0;if(_bf){nm="[ Error: "+(obj.message||obj.description||obj)+" ]";}else{if(_b7(obj)){nm="["+obj.slice(0,_c1).join(",");if(obj.length>_c1){nm+=" ... ("+obj.length+" items)";}nm+="]";}else{if(typeof obj=="function"){nm=obj+"";var reg=/function\s*([^\(]*)(\([^\)]*\))[^\{]*\{/;var m=reg.exec(nm);if(m){if(!m[1]){m[1]="function";}nm=m[1]+m[2];}else{nm="function()";}}else{if(typeof obj!="object"||typeof obj=="string"){nm=obj+"";}else{nm="{";for(var i in obj){cnt++;if(cnt>_c0){break;}nm+=i+":"+_75(obj[i])+"  ";}nm+="}";}}}}return nm;};_43(document,_1.isIE||_1.isSafari?"keydown":"keypress",_45);if((document.documentElement.getAttribute("debug")=="true")||(_1.config.isDebug)){_2e(true);}_1.addOnWindowUnload(function(){_9b(document,_1.isIE||_1.isSafari?"keydown":"keypress",_45);window.onFirebugResize=null;window.console=null;});});