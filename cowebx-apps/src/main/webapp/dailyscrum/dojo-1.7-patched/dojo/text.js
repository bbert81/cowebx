/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

define(["./_base/kernel","./_base/xhr","require","./has"],function(_1,_2,_3,_4){var _5=function(_6,_7,_8){_2("GET",{url:_6,sync:_7,load:_8});};if(!1){if(_3.getText){_5=_3.getText;}else{console.error("dojo/text plugin failed to load because loader does not support getText");}}var _9={},_a=function(_b,_c){if(_c.toAbsMid){var _d=_b.match(/(.+)(\.[^\/\.]+)$/);return _d?_c.toAbsMid(_d[1])+_d[2]:_c.toAbsMid(_b);}return _b;},_e=function(_f,url,_10){_f=_f||"*garbage*";_9[_f]=_9[url]=_10;},_11=function(_12){if(_12){_12=_12.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,"");var _13=_12.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);if(_13){_12=_13[1];}}else{_12="";}return _12;},_14={load:function(id,_15,_16){var _17=id.split("!"),_18=_17[0],_19=_a(_18,_15),_1a=_17.length>1,url;if(_19 in _9){_16(_1a?_11(_9[_19]):_9[_19]);return;}url=_15.toUrl(_18);if(url in _9){_16(_1a?_11(_9[url]):_9[url]);return;}var _1b=function(_1c){_e(_19,url,_1c);_16(_1a?_11(_9[url]):_9[url]);},_1d;try{_1d=_15("*text/"+_19);if(_1d!==undefined){_1b(_1d);return;}}catch(e){}_5(url,!_15.async,_1b);},cache:function(_1e,mid,_1f,_20){_e(_1e,_3.nameToUrl(mid)+_1f,_20);}};_1.cache=function(_21,url,_22){var key;if(typeof _21=="string"){_21=(_21.replace(/\./g,"/")+(url?("/"+url):"")).replace(/^dojo\//,"./");key=_3.nameToUrl(_21);}else{key=_21+"";_22=url;}var val=(_22!=undefined&&typeof _22!="string")?_22.value:_22,_23=_22&&_22.sanitize;if(typeof val=="string"){_9[key]=val;return _11?_11(val):val;}else{if(val===null){delete _9[key];return null;}else{if(!(key in _9)){_5(key,true,function(_24){_e(0,key,_24);});}return _11?_11(_9[key]):_9[key];}}};return _14;});