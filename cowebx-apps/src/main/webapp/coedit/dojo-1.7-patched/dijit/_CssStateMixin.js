/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

define(["dojo/_base/kernel",".","dojo/_base/array","dojo/_base/html","dojo/_base/lang","dojo/_base/window"],function(_1,_2){_1.declare("dijit._CssStateMixin",[],{cssStateNodes:{},hovering:false,active:false,_applyAttributes:function(){this.inherited(arguments);_1.forEach(["onmouseenter","onmouseleave","onmousedown"],function(e){this.connect(this.domNode,e,"_cssMouseEvent");},this);_1.forEach(["disabled","readOnly","checked","selected","focused","state","hovering","active"],function(_3){this.watch(_3,_1.hitch(this,"_setStateClass"));},this);for(var ap in this.cssStateNodes){this._trackMouseState(this[ap],this.cssStateNodes[ap]);}this._setStateClass();},_cssMouseEvent:function(_4){if(!this.disabled){switch(_4.type){case "mouseenter":case "mouseover":this._set("hovering",true);this._set("active",this._mouseDown);break;case "mouseleave":case "mouseout":this._set("hovering",false);this._set("active",false);break;case "mousedown":this._set("active",true);this._mouseDown=true;var _5=this.connect(_1.body(),"onmouseup",function(){this._mouseDown=false;this._set("active",false);this.disconnect(_5);});break;}}},_setStateClass:function(){var _6=this.baseClass.split(" ");function _7(_8){_6=_6.concat(_1.map(_6,function(c){return c+_8;}),"dijit"+_8);};if(!this.isLeftToRight()){_7("Rtl");}var _9=this.checked=="mixed"?"Mixed":(this.checked?"Checked":"");if(this.checked){_7(_9);}if(this.state){_7(this.state);}if(this.selected){_7("Selected");}if(this.disabled){_7("Disabled");}else{if(this.readOnly){_7("ReadOnly");}else{if(this.active){_7("Active");}else{if(this.hovering){_7("Hover");}}}}if(this.focused){_7("Focused");}var tn=this.stateNode||this.domNode,_a={};_1.forEach(tn.className.split(" "),function(c){_a[c]=true;});if("_stateClasses" in this){_1.forEach(this._stateClasses,function(c){delete _a[c];});}_1.forEach(_6,function(c){_a[c]=true;});var _b=[];for(var c in _a){_b.push(c);}tn.className=_b.join(" ");this._stateClasses=_6;},_trackMouseState:function(_c,_d){var _e=false,_f=false,_10=false;var _11=this,cn=_1.hitch(this,"connect",_c);function _12(){var _13=("disabled" in _11&&_11.disabled)||("readonly" in _11&&_11.readonly);_1.toggleClass(_c,_d+"Hover",_e&&!_f&&!_13);_1.toggleClass(_c,_d+"Active",_f&&!_13);_1.toggleClass(_c,_d+"Focused",_10&&!_13);};cn("onmouseenter",function(){_e=true;_12();});cn("onmouseleave",function(){_e=false;_f=false;_12();});cn("onmousedown",function(){_f=true;_12();});cn("onmouseup",function(){_f=false;_12();});cn("onfocus",function(){_10=true;_12();});cn("onblur",function(){_10=false;_12();});this.watch("disabled",_12);this.watch("readOnly",_12);}});return _2._CssStateMixin;});