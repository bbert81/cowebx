/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

define(["doh","../bits"],function(_1,_2){var _3="The rain in Spain falls mainly on the plain.";var _4="The rain in Spain falls mainly on the plain.1";var _5="The rain in Spain falls mainly on the plain.ab";var _6="The rain in Spain falls mainly on the plain.!@#";var _7=function(s){var b=[];for(var i=0;i<s.length;++i){b.push(s.charCodeAt(i));}return b;};var _8=function(b){var s=[];dojo.forEach(b,function(c){s.push(String.fromCharCode(c));});return s.join("");};var _9=function(_a){var a=new _2.OutputStream();for(var i=0;i<_a.length;++i){var v=_a.charCodeAt(i);var j=Math.floor(Math.random()*7)+1;a.putBits(v>>>(8-j),j);a.putBits(v,8-j);}return _8(a.getBuffer());};var _b=function(_c){var a=new _2.InputStream(_7(_c),_c.length*8);var r=[];for(var i=0;i<_c.length;++i){var j=Math.floor(Math.random()*7)+1;r.push((a.getBits(j)<<(8-j))|a.getBits(8-j));}return _8(r);};var _d=function(_e){var a=new _2.InputStream(_7(_e),_e.length*8);var o=new _2.OutputStream();while(a.getWidth()>0){var w=Math.min(a.getWidth(),3);o.putBits(a.getBits(w),w);}return _8(o.getBuffer());};_1.register("dojox.encoding.tests.bits",[function testBitsOut1(t){t.assertEqual(_3,_9(_3));},function testBitsOut2(t){t.assertEqual(_4,_9(_4));},function testBitsOut3(t){t.assertEqual(_5,_9(_5));},function testBitsOut4(t){t.assertEqual(_6,_9(_6));},function testBitsIn1(t){t.assertEqual(_3,_b(_3));},function testBitsIn2(t){t.assertEqual(_4,_b(_4));},function testBitsIn3(t){t.assertEqual(_5,_b(_5));},function testBitsIn4(t){t.assertEqual(_6,_b(_6));},function testBits1(t){t.assertEqual(_3,_d(_3));},function testBits2(t){t.assertEqual(_4,_d(_4));},function testBits3(t){t.assertEqual(_5,_d(_5));},function testBits4(t){t.assertEqual(_6,_d(_6));}]);});