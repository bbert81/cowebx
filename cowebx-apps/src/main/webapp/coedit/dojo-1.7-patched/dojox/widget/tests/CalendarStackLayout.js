/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

define(["dojo","dijit","dojox","dijit/layout/ContentPane","dijit/layout/StackContainer","dojox/widget/Calendar","dijit/_Widget","dijit/_Container","dojo/string"],function(_1,_2,_3){_1.getObject("dojox.widget.tests.CalendarStackLayout",1);_1.declare("dojox.widget.tests.CalendarStackLayout",[_2._Widget,_2._Container],{dateToPane:{},startup:function(){if(this._started){return null;}var _4=this.getChildren();var _5=[];_1.forEach(_4,_1.hitch(this,function(_6){var _7=_6.domNode.getAttribute("dateref");this.dateToPane[_7]=_6;var _8=_7.split("-");var _9=new Date();_9.setFullYear(_8[0]);_9.setMonth(Number(_8[1])-1);_9.setDate(_8[2]);_5.push(_9.getTime());}));_5.sort();var _a=new Date(_5[_5.length-1]);var _b=new Date(_5[0]);var _c=this;function _d(_e){return _c.dateToPane[_e.getFullYear()+"-"+_1.string.pad(String(_e.getMonth()+1),2)+"-"+_1.string.pad(String(_e.getDate()))];};this.calendar=new _3.widget.Calendar({getClassForDate:function(_f){return _d(_f)?" hasAppointment":" noAppointment";},isDisabledDate:function(_10){return _d(_10)?false:true;}});if(this.calendar.attr("value").getTime()>_a.getTime()){this.calendar.attr("value",_a);}else{if(this.calendar.attr("value").getTime()<_b.getTime()){this.calendar.attr("value",_b);}}this.stack=new _2.layout.StackContainer();_1.addClass(this.stack.domNode,"calendarStack");this.addChild(this.calendar);this.addChild(this.stack);_1.style(this.stack.domNode,"width",_1.style(this.calendar.domNode,"width")+"px");_1.addClass(this.stack.domNode,"dijitCalendarStackDetails");_1.forEach(_4,_1.hitch(this,function(_11){this.stack.addChild(_11);}));_1.connect(this.calendar,"onValueSelected",_1.hitch(this,function(_12){var _13=_d(_12);if(_13){this.stack.selectChild(_13);}}));this.stack.selectChild(_4[_4.length-1]);if(!this.stack.started&&!this.stack._started){this.stack.startup();}return this.inherited(arguments);}});});require(["dojox/widget/tests/CalendarStackLayout"]);