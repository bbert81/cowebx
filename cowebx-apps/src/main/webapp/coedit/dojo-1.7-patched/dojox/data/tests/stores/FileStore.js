/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

define(["dojo","dijit","dojox","dojox/data/FileStore","dojo/data/api/Read","dojo/data/api/Identity"],function(_1,_2,_3){_1.getObject("dojox.data.tests.stores.FileStore",1);_3.data.tests.stores.FileStore.getGeoStore=function(){return new _3.data.FileStore({url:_1.moduleUrl("dojox.data.tests.stores","filestore_dojoxdatageo.php").toString(),pathAsQueryParam:true});};doh.register("dojox.data.tests.stores.FileStore",[{name:"testReadAPI_fetch_all",timeout:10000,runTest:function(t){var _4=_3.data.tests.stores.FileStore.getGeoStore();var d=new doh.Deferred();function _5(_6,_7){t.assertEqual(49,_6.length);d.callback(true);};function _8(_9,_a){d.errback(_9);};_4.fetch({query:{name:"*"},queryOptions:{deep:true},onComplete:_5,onError:_8});return d;}},{name:"testReadAPI_fetch_one",timeout:10000,runTest:function(t){var _b=_3.data.tests.stores.FileStore.getGeoStore();var d=new doh.Deferred();function _c(_d,_e){t.assertEqual(1,_d.length);d.callback(true);};function _f(_10,_11){d.errback(_10);};_b.fetch({query:{name:"Commonwealth of Australia"},onComplete:_c,onError:_f});return d;}},{name:"testReadAPI_fetch_paging",timeout:10000,runTest:function(t){var _12=_3.data.tests.stores.FileStore.getGeoStore();var d=new doh.Deferred();function _13(_14,_15){t.assertEqual(20,_14.length);d.callback(true);};function _16(_17,_18){t.assertEqual(40,_17.length);_18.start=2;_18.count=20;_18.onComplete=_13;_12.fetch(_18);};function _19(_1a,_1b){t.assertEqual(20,_1a.length);_1b.start=9;_1b.count=100;_1b.onComplete=_16;_12.fetch(_1b);};function _1c(_1d,_1e){t.assertEqual(5,_1d.length);_1e.start=2;_1e.count=20;_1e.onComplete=_19;_12.fetch(_1e);};function _1f(_20,_21){t.assertEqual(1,_20.length);_21.start=0;_21.count=5;_21.onComplete=_1c;_12.fetch(_21);};function _22(_23,_24){t.assertEqual(5,_23.length);_24.start=3;_24.count=1;_24.onComplete=_1f;_12.fetch(_24);};function _25(_26,_27){t.assertEqual(49,_26.length);_27.start=1;_27.count=5;_27.onComplete=_22;_12.fetch(_27);};function _28(_29,_2a){d.errback(_29);};_12.fetch({queryOptions:{deep:true},onComplete:_25,onError:_28});return d;}},{name:"testReadAPI_fetch_pattern0",timeout:10000,runTest:function(t){var _2b=_3.data.tests.stores.FileStore.getGeoStore();var d=new doh.Deferred();function _2c(_2d,_2e){t.assertEqual(3,_2d.length);d.callback(true);};function _2f(_30,_31){d.errback(_30);};_2b.fetch({query:{name:"C*"},onComplete:_2c,onError:_2f});return d;}},{name:"testReadAPI_fetch_pattern1",timeout:10000,runTest:function(t){var _32=_3.data.tests.stores.FileStore.getGeoStore();var d=new doh.Deferred();function _33(_34,_35){t.assertEqual(1,_34.length);d.callback(true);};function _36(_37,_38){d.errback(_37);};_32.fetch({query:{name:"?ussia"},onComplete:_33,onError:_36});return d;}},{name:"testReadAPI_fetch_pattern_caseInsensitive",timeout:10000,runTest:function(t){var _39=_3.data.tests.stores.FileStore.getGeoStore();var d=new doh.Deferred();function _3a(_3b,_3c){t.assertEqual(1,_3b.length);d.callback(true);};function _3d(_3e,_3f){d.errback(_3e);};_39.fetch({query:{name:"germany"},queryOptions:{ignoreCase:true},onComplete:_3a,onError:_3d});return d;}},{name:"testReadAPI_fetch_pattern_caseSensitive",timeout:10000,runTest:function(t){var _40=_3.data.tests.stores.FileStore.getGeoStore();var d=new doh.Deferred();function _41(_42,_43){t.assertEqual(1,_42.length);d.callback(true);};function _44(_45,_46){d.errback(_45);};_40.fetch({query:{name:"Germany"},queryOptions:{ignoreCase:false},onComplete:_41,onError:_44});return d;}},{name:"testReadAPI_getLabel",timeout:10000,runTest:function(t){var _47=_3.data.tests.stores.FileStore.getGeoStore();var d=new doh.Deferred();function _48(_49,_4a){t.assertEqual(_49.length,1);var _4b=_47.getLabel(_49[0]);t.assertTrue(_4b!==null);t.assertEqual("China",_4b);d.callback(true);};function _4c(_4d,_4e){d.errback(_4d);};_47.fetch({query:{name:"China"},onComplete:_48,onError:_4c});return d;}},{name:"testReadAPI_getLabelAttributes",timeout:10000,runTest:function(t){var _4f=_3.data.tests.stores.FileStore.getGeoStore();var d=new doh.Deferred();function _50(_51,_52){t.assertEqual(_51.length,1);var _53=_4f.getLabelAttributes(_51[0]);t.assertTrue(_53!==null);t.assertEqual("name",_53[0]);d.callback(true);};function _54(_55,_56){d.errback(_55);};_4f.fetch({query:{name:"China"},onComplete:_50,onError:_54});return d;}},{name:"testReadAPI_getValue",timeout:10000,runTest:function(t){var _57=_3.data.tests.stores.FileStore.getGeoStore();var d=new doh.Deferred();function _58(_59,_5a){t.assertEqual(1,_59.length);var _5b=_59[0];t.assertTrue(_57.hasAttribute(_5b,"name"));t.assertEqual(_57.getValue(_5b,"name"),"Guadalajara");d.callback(true);};function _5c(_5d,_5e){d.errback(_5d);};_57.fetch({query:{name:"Guadalajara"},queryOptions:{deep:true},onComplete:_58,onError:_5c});return d;}},{name:"testReadAPI_getValues",timeout:10000,runTest:function(t){var _5f=_3.data.tests.stores.FileStore.getGeoStore();var d=new doh.Deferred();function _60(_61,_62){t.assertEqual(1,_61.length);var _63=_61[0];t.assertTrue(_5f.hasAttribute(_63,"name"));var _64=_5f.getValues(_63,"name");t.assertEqual(1,_64.length);t.assertEqual("Guadalajara",_64[0]);d.callback(true);};function _65(_66,_67){d.errback(_66);};_5f.fetch({query:{name:"Guadalajara"},queryOptions:{deep:true},onComplete:_60,onError:_65});return d;}},{name:"testReadAPI_isItem",timeout:10000,runTest:function(t){var _68=_3.data.tests.stores.FileStore.getGeoStore();var d=new doh.Deferred();function _69(_6a,_6b){t.assertEqual(1,_6a.length);var _6c=_6a[0];t.assertTrue(_68.isItem(_6c));t.assertTrue(!_68.isItem({}));t.assertTrue(!_68.isItem("Foo"));t.assertTrue(!_68.isItem(1));d.callback(true);};function _6d(_6e,_6f){d.errback(_6e);};_68.fetch({query:{name:"Guadalajara"},queryOptions:{deep:true},onComplete:_69,onError:_6d});return d;}},{name:"testReadAPI_isItem_multistore",timeout:10000,runTest:function(t){var _70=_3.data.tests.stores.FileStore.getGeoStore();var _71=_3.data.tests.stores.FileStore.getGeoStore();var d=new doh.Deferred();function _72(_73,_74){d.errback(_73);};function _75(_76,_77){t.assertEqual(1,_76.length);var _78=_76[0];t.assertTrue(_70.isItem(_78));function _79(_7a,_7b){t.assertEqual(1,_7a.length);var _7c=_7a[0];t.assertTrue(_71.isItem(_7c));t.assertTrue(!_70.isItem(_7c));t.assertTrue(!_71.isItem(_78));d.callback(true);};_71.fetch({query:{name:"Guadalajara"},queryOptions:{deep:true},onComplete:_79,onError:_72});};_70.fetch({query:{name:"China"},onComplete:_75,onError:_72});return d;}},{name:"testReadAPI_hasAttribute",timeout:10000,runTest:function(t){var _7d=_3.data.tests.stores.FileStore.getGeoStore();var d=new doh.Deferred();function _7e(_7f,_80){t.assertEqual(1,_7f.length);var _81=_7f[0];t.assertTrue(_7d.hasAttribute(_81,"name"));t.assertTrue(!_7d.hasAttribute(_81,"bob"));d.callback(true);};function _82(_83,_84){d.errback(_83);};_7d.fetch({query:{name:"China"},onComplete:_7e,onError:_82});return d;}},{name:"testReadAPI_containsValue",timeout:10000,runTest:function(t){var _85=_3.data.tests.stores.FileStore.getGeoStore();var d=new doh.Deferred();function _86(_87,_88){t.assertEqual(1,_87.length);var _89=_87[0];t.assertTrue(_85.containsValue(_89,"name","China"));t.assertTrue(!_85.containsValue(_89,"name","bob"));d.callback(true);};function _8a(_8b,_8c){d.errback(_8b);};_85.fetch({query:{name:"China"},onComplete:_86,onError:_8a});return d;}},{name:"testReadAPI_sortDescending",timeout:10000,runTest:function(t){var _8d=_3.data.tests.stores.FileStore.getGeoStore();var _8e=["root.json","United States of America","Sudan","Spain","Russia","Mongolia","Mexico","Kenya","Italy","India","Germany","France","Egypt","Commonwealth of Australia","China","Canada","Brazil","Argentina"];var d=new doh.Deferred();function _8f(_90,_91){t.assertEqual(18,_90.length);for(var i=0;i<_90.length;i++){t.assertEqual(_8e[i],_8d.getValue(_90[i],"name").toString());}d.callback(true);};function _92(_93,_94){d.errback(_93);};var _95=[{attribute:"name",descending:true}];_8d.fetch({query:{name:"*"},sort:_95,onComplete:_8f,onError:_92});return d;}},{name:"testReadAPI_sortAscending",timeout:10000,runTest:function(t){var _96=_3.data.tests.stores.FileStore.getGeoStore();var _97=["root.json","United States of America","Sudan","Spain","Russia","Mongolia","Mexico","Kenya","Italy","India","Germany","France","Egypt","Commonwealth of Australia","China","Canada","Brazil","Argentina"].reverse();var d=new doh.Deferred();function _98(_99,_9a){t.assertEqual(18,_99.length);for(var i=0;i<_99.length;i++){t.assertEqual(_97[i],_96.getValue(_99[i],"name").toString());}d.callback(true);};function _9b(_9c,_9d){d.errback(_9c);};var _9e=[{attribute:"name"}];_96.fetch({query:{name:"*"},sort:_9e,onComplete:_98,onError:_9b});return d;}},{name:"testReadAPI_isItemLoaded",timeout:10000,runTest:function(t){var _9f=_3.data.tests.stores.FileStore.getGeoStore();var d=new doh.Deferred();function _a0(_a1,_a2){t.assertEqual(1,_a1.length);var _a3=_a1[0];t.assertTrue(_9f.isItemLoaded(_a3));d.callback(true);};function _a4(_a5,_a6){d.errback(_a5);};_9f.fetch({query:{name:"China"},onComplete:_a0,onError:_a4});return d;}},function testReadAPI_getFeatures(t){var _a7=_3.data.tests.stores.FileStore.getGeoStore();var _a8=_a7.getFeatures();var _a9=0;var i;for(i in _a8){t.assertTrue((i==="dojo.data.api.Read"||i==="dojo.data.api.Identity"));_a9++;}t.assertEqual(2,_a9);},{name:"testReadAPI_getAttributes",timeout:10000,runTest:function(t){var _aa=_3.data.tests.stores.FileStore.getGeoStore();var d=new doh.Deferred();function _ab(_ac,_ad){t.assertEqual(1,_ac.length);var _ae=_ac[0];var _af=_aa.getAttributes(_ae);t.assertEqual(7,_af.length);for(var i=0;i<_af.length;i++){t.assertTrue((_af[i]==="children"||_af[i]==="directory"||_af[i]==="name"||_af[i]==="path"||_af[i]==="modified"||_af[i]==="size"||_af[i]==="parentDir"));}d.callback(true);};function _b0(_b1,_b2){d.errback(_b1);};_aa.fetch({query:{name:"China"},onComplete:_ab,onError:_b0});return d;}},function testReadAPI_functionConformance(t){var _b3=_3.data.tests.stores.FileStore.getGeoStore();var _b4=new _1.data.api.Read();var _b5=true;var i;for(i in _b4){var _b6=_b4[i];if(typeof _b6==="function"){var _b7=_b3[i];if(!(typeof _b7==="function")){_b5=false;break;}}}t.assertTrue(_b5);},{name:"testIdentityAPI_getIdentity",timeout:10000,runTest:function(t){var _b8=_3.data.tests.stores.FileStore.getGeoStore();var d=new doh.Deferred();function _b9(_ba,_bb){t.assertEqual(1,_ba.length);var _bc=_ba[0];t.assertEqual("./Argentina",_b8.getIdentity(_bc));d.callback(true);};function _bd(_be,_bf){d.errback(_be);};_b8.fetch({query:{name:"Argentina"},onComplete:_b9,onError:_bd});return d;}},{name:"testIdentityAPI_getIdentityAttributes",timeout:10000,runTest:function(t){var _c0=_3.data.tests.stores.FileStore.getGeoStore();var d=new doh.Deferred();function _c1(_c2,_c3){t.assertEqual(1,_c2.length);var _c4=_c2[0];var _c5=_c0.getIdentityAttributes(_c4);t.assertEqual(1,_c5.length);t.assertEqual("path",_c5[0]);d.callback(true);};function _c6(_c7,_c8){d.errback(_c7);};_c0.fetch({query:{name:"Argentina"},onComplete:_c1,onError:_c6});return d;}},{name:"testIdentityAPI_fetchItemByIdentity",timeout:10000,runTest:function(t){var _c9=_3.data.tests.stores.FileStore.getGeoStore();var d=new doh.Deferred();function _ca(_cb,_cc){t.assertTrue(_cb!==null);t.assertTrue(_c9.isItem(_cb));t.assertEqual("Argentina",_c9.getValue(_cb,"name"));d.callback(true);};function _cd(_ce,_cf){d.errback(_ce);};_c9.fetchItemByIdentity({identity:"./Argentina",onItem:_ca,onError:_cd});return d;}},function testIdentityAPI_functionConformance(t){var _d0=_3.data.tests.stores.FileStore.getGeoStore();var _d1=new _1.data.api.Identity();var _d2=true;var i;for(i in _d1){var _d3=_d1[i];if(typeof _d3==="function"){var _d4=_d0[i];if(!(typeof _d4==="function")){_d2=false;break;}}}t.assertTrue(_d2);}]);});require(["dojox/data/tests/stores/FileStore"]);