/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

define(["dojo","dijit","dojox","dojox/data/GoogleSearchStore","dojo/data/api/Read"],function(_1,_2,_3){_1.getObject("dojox.data.tests.stores.GoogleSearchStore",1);_3.data.tests.stores.GoogleSearchStore.getStore=function(){return new _3.data.GoogleSearchStore();};_3.data.tests.stores.GoogleSearchStore.error=function(t,d,_4){d.errback(_4);};doh.register("dojox.data.tests.stores.GoogleSearchStore",[{name:"ReadAPI:  Fetch_One",timeout:30000,runTest:function(t){var _5=_3.data.tests.stores.GoogleSearchStore.getStore();var d=new doh.Deferred();function _6(_7,_8){t.is(1,_7.length);d.callback(true);};_5.fetch({query:{text:"kinsale"},count:1,onComplete:_6,onError:_1.partial(_3.data.tests.stores.GoogleSearchStore.error,doh,d)});return d;}},{name:"ReadAPI:  test_Invalid_Query",timeout:30000,runTest:function(t){var _9=_3.data.tests.stores.GoogleSearchStore.getStore();var d=new doh.Deferred();function _a(_b,_c){t.assertTrue(false);d.callback(true);};function _d(_e,_f){t.assertTrue(false);d.callback(true);};function _10(_11,_12){t.assertTrue(false);d.callback(true);};try{_9.fetch({query:{},count:1,onItem:_d,onBegin:_a,onComplete:_10,onError:function(){d.callback(true);}});}catch(e){t.assertTrue(false);d.callback(true);}return d;}},{name:"ReadAPI:  Fetch_25_Streaming",timeout:30000,runTest:function(t){var _13=_3.data.tests.stores.GoogleSearchStore.getStore();var d=new doh.Deferred();var _14=0;function _15(_16,_17){t.assertTrue(_13.isItem(_16));_14++;};function _18(_19,_1a){t.is(25,_14);t.is(null,_19);d.callback(true);};_13.fetch({query:{text:"kinsale"},onBegin:null,count:25,onItem:_15,onComplete:_18,onError:_1.partial(_3.data.tests.stores.GoogleSearchStore.error,t,d)});return d;}},{name:"ReadAPI:  Fetch_Paging",timeout:30000,runTest:function(t){var _1b=_3.data.tests.stores.GoogleSearchStore.getStore();var d=new doh.Deferred();function _1c(_1d,_1e){t.is(16,_1d.length);d.callback(true);};function _1f(_20,_21){t.is(11,_20.length);_21.start=4;_21.count=16;_21.onComplete=_1c;_1b.fetch(_21);};function _22(_23,_24){t.is(18,_23.length);_24.start=5;_24.count=11;_24.onComplete=_1f;_1b.fetch(_24);};function _25(_26,_27){t.is(5,_26.length);_27.start=2;_27.count=18;_27.onComplete=_22;_1b.fetch(_27);};function _28(_29,_2a){t.is(1,_29.length);_2a.start=0;_2a.count=5;_2a.onComplete=_25;_1b.fetch(_2a);};function _2b(_2c,_2d){t.is(5,_2c.length);_2d.start=3;_2d.count=1;_2d.onComplete=_28;_1b.fetch(_2d);};function _2e(_2f,_30){t.is(7,_2f.length);d.callback(true);};_1b.fetch({query:{text:"kinsale"},count:7,onComplete:_2e,onError:_1.partial(_3.data.tests.stores.GoogleSearchStore.error,t,d)});return d;}},{name:"ReadAPI:  getLabel",timeout:30000,runTest:function(t){var _31=_3.data.tests.stores.GoogleSearchStore.getStore();var d=new doh.Deferred();function _32(_33,_34){t.assertEqual(_33.length,1);var _35=_31.getLabel(_33[0]);t.assertTrue(_35!==null);d.callback(true);};_31.fetch({query:{text:"kinsale"},count:1,onComplete:_32,onError:_1.partial(_3.data.tests.stores.GoogleSearchStore.error,t,d)});return d;}},{name:"ReadAPI:  getLabelAttributes",timeout:30000,runTest:function(t){var _36=_3.data.tests.stores.GoogleSearchStore.getStore();var d=new doh.Deferred();function _37(_38,_39){t.assertEqual(_38.length,1);var _3a=_36.getLabelAttributes(_38[0]);t.assertTrue(_1.isArray(_3a));t.assertEqual("titleNoFormatting",_3a[0]);d.callback(true);};_36.fetch({query:{text:"kinsale"},count:1,onComplete:_37,onError:_1.partial(_3.data.tests.stores.GoogleSearchStore.error,t,d)});return d;}},{name:"ReadAPI:  getValue",timeout:30000,runTest:function(t){var _3b=_3.data.tests.stores.GoogleSearchStore.getStore();var d=new doh.Deferred();function _3c(_3d){t.is(1,_3d.length);t.assertTrue(_3b.getValue(_3d[0],"unescapedUrl")!==null);t.assertTrue(_3b.getValue(_3d[0],"url")!==null);t.assertTrue(_3b.getValue(_3d[0],"visibleUrl")!==null);t.assertTrue(_3b.getValue(_3d[0],"cacheUrl")!==null);t.assertTrue(_3b.getValue(_3d[0],"title")!==null);t.assertTrue(_3b.getValue(_3d[0],"titleNoFormatting")!==null);t.assertTrue(_3b.getValue(_3d[0],"content")!==null);d.callback(true);};_3b.fetch({query:{text:"kinsale"},count:1,onComplete:_3c,onError:_1.partial(_3.data.tests.stores.GoogleSearchStore.error,t,d)});return d;}},{name:"ReadAPI:  getValue_Failure",timeout:30000,runTest:function(t){var _3e=_3.data.tests.stores.GoogleSearchStore.getStore();var _3f=false;try{var _40=_3e.getValue("NotAnItem","foo");}catch(e){_3f=true;}t.assertTrue(_3f);}},{name:"ReadAPI:  getValues",timeout:30000,runTest:function(t){var _41=_3.data.tests.stores.GoogleSearchStore.getStore();var d=new doh.Deferred();function _42(_43){t.is(1,_43.length);var _44=_41.getValues(_43[0],"unescapedUrl");t.assertTrue(_1.isArray(_44));var url=_41.getValues(_43[0],"url");t.assertTrue(_1.isArray(url));var _45=_41.getValues(_43[0],"visibleUrl");t.assertTrue(_1.isArray(_45));var _46=_41.getValues(_43[0],"cacheUrl");t.assertTrue(_1.isArray(_46));var _47=_41.getValues(_43[0],"title");t.assertTrue(_1.isArray(_47));var _48=_41.getValues(_43[0],"titleNoFormatting");t.assertTrue(_1.isArray(_48));var _49=_41.getValues(_43[0],"content");t.assertTrue(_1.isArray(_49));d.callback(true);};_41.fetch({query:{text:"kinsale"},count:1,onComplete:_42,onError:_1.partial(_3.data.tests.stores.GoogleSearchStore.error,t,d)});return d;}},{name:"ReadAPI:  getValues_Failure",timeout:30000,runTest:function(t){var _4a=_3.data.tests.stores.GoogleSearchStore.getStore();var _4b=false;try{var _4c=_4a.getValues("NotAnItem","foo");}catch(e){_4b=true;}t.assertTrue(_4b);}},{name:"ReadAPI:  isItem",timeout:30000,runTest:function(t){var _4d=_3.data.tests.stores.GoogleSearchStore.getStore();var d=new doh.Deferred();function _4e(_4f){t.is(5,_4f.length);for(var i=0;i<_4f.length;i++){t.assertTrue(_4d.isItem(_4f[i]));}d.callback(true);};_4d.fetch({query:{text:"kinsale"},count:5,onComplete:_4e,onError:_1.partial(_3.data.tests.stores.GoogleSearchStore.error,t,d)});return d;}},{name:"ReadAPI:  hasAttribute",timeout:30000,runTest:function(t){var _50=_3.data.tests.stores.GoogleSearchStore.getStore();var d=new doh.Deferred();function _51(_52){t.is(1,_52.length);t.assertTrue(_52[0]!==null);var _53=0;t.assertTrue(_50.hasAttribute(_52[0],"unescapedUrl"));t.assertTrue(_50.hasAttribute(_52[0],"url"));t.assertTrue(_50.hasAttribute(_52[0],"visibleUrl"));t.assertTrue(_50.hasAttribute(_52[0],"cacheUrl"));t.assertTrue(_50.hasAttribute(_52[0],"title"));t.assertTrue(_50.hasAttribute(_52[0],"titleNoFormatting"));t.assertTrue(_50.hasAttribute(_52[0],"content"));t.assertTrue(!_50.hasAttribute(_52[0],"I dont exist"));try{_50.hasAttribute(_52[0],null);t.assertTrue(false);}catch(e){}d.callback(true);};_50.fetch({query:{text:"kinsale"},count:1,onComplete:_51,onError:_1.partial(_3.data.tests.stores.GoogleSearchStore.error,t,d)});return d;}},{name:"ReadAPI:  containsValue",timeout:30000,runTest:function(t){var _54=_3.data.tests.stores.GoogleSearchStore.getStore();var d=new doh.Deferred();function _55(_56){t.is(1,_56.length);t.assertTrue(_54.containsValue(_56[0],"url",_56[0].url));d.callback(true);};_54.fetch({query:{text:"kinsale"},count:1,onComplete:_55,onError:_1.partial(_3.data.tests.stores.GoogleSearchStore.error,t,d)});return d;}},{name:"ReadAPI:  getAttributes",timeout:30000,runTest:function(t){var _57=_3.data.tests.stores.GoogleSearchStore.getStore();var d=new doh.Deferred();function _58(_59){t.is(1,_59.length);t.assertTrue(_57.isItem(_59[0]));var _5a=_57.getAttributes(_59[0]);t.is(8,_5a.length);d.callback(true);};_57.fetch({query:{text:"kinsale"},count:1,onComplete:_58,onError:_1.partial(_3.data.tests.stores.GoogleSearchStore.error,t,d)});return d;}},{name:"GoogleSearchStore:  DOM Cleanup",timeout:30000,runTest:function(t){var _5b=_3.data.tests.stores.GoogleSearchStore.getStore();var d=new doh.Deferred();var _5c=_1.query("head script").length;function _5d(_5e){var _5f=_1.query("head script").length;t.is(_5c,_5f);d.callback(true);};_5b.fetch({query:{text:"kinsale"},count:50,onComplete:_5d,onError:_1.partial(_3.data.tests.stores.GoogleSearchStore.error,t,d)});return d;}},function testReadAPI_getFeatures(t){var _60=_3.data.tests.stores.GoogleSearchStore.getStore();var _61=_60.getFeatures();var _62=0;var i;for(i in _61){t.assertTrue((i==="dojo.data.api.Read"));_62++;}t.assertTrue(_62===1);},function testReadAPI_functionConformance(t){var _63=_3.data.tests.stores.GoogleSearchStore.getStore();var _64=new _1.data.api.Read();var _65=true;var i;for(i in _64){if(i.toString().charAt(0)!=="_"){var _66=_64[i];if(typeof _66==="function"){var _67=_63[i];if(!(typeof _67==="function")){_65=false;break;}}}}t.assertTrue(_65);}]);});require(["dojox/data/tests/stores/GoogleSearchStore"]);