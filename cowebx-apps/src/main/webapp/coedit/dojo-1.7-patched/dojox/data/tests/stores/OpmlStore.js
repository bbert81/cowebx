/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

define(["dojo","dijit","dojox","dojox/data/OpmlStore","dojo/data/api/Read","dojo/data/api/Identity"],function(_1,_2,_3){_1.getObject("dojox.data.tests.stores.OpmlStore",1);_3.data.tests.stores.OpmlStore.getDatasource=function(_4){var _5={};if(_1.isBrowser){_5.url=_1.moduleUrl("dojox.data.tests",_4).toString();}else{switch(_4){case "stores/geography.xml":var _6="";_6+="<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?>\n";_6+="\t<opml version=\"1.0\">\n";_6+="\t\t<head>\n";_6+="\t\t\t<title>geography.opml</title>\n";_6+="\t\t\t<dateCreated>2006-11-10</dateCreated>\n";_6+="\t\t\t<dateModified>2006-11-13</dateModified>\n";_6+="\t\t\t<ownerName>Magellan, Ferdinand</ownerName>\n";_6+="\t\t</head>\n";_6+="\t\t<body>\n";_6+="\t\t\t<outline text=\"Africa\" type=\"continent\">\n";_6+="\t\t\t\t<outline text=\"Egypt\" type=\"country\"/>\n";_6+="\t\t\t\t<outline text=\"Kenya\" type=\"country\">\n";_6+="\t\t\t\t\t<outline text=\"Nairobi\" type=\"city\"/>\n";_6+="\t\t\t\t\t<outline text=\"Mombasa\" type=\"city\"/>\n";_6+="\t\t\t\t</outline>\n";_6+="\t\t\t\t<outline text=\"Sudan\" type=\"country\">\n";_6+="\t\t\t\t\t<outline text=\"Khartoum\" type=\"city\"/>\n";_6+="\t\t\t\t</outline>\n";_6+="\t\t\t</outline>\n";_6+="\t\t\t<outline text=\"Asia\" type=\"continent\">\n";_6+="\t\t\t\t<outline text=\"China\" type=\"country\"/>\n";_6+="\t\t\t\t<outline text=\"India\" type=\"country\"/>\n";_6+="\t\t\t\t<outline text=\"Russia\" type=\"country\"/>\n";_6+="\t\t\t\t<outline text=\"Mongolia\" type=\"country\"/>\n";_6+="\t\t\t</outline>\n";_6+="\t\t\t<outline text=\"Australia\" type=\"continent\" population=\"21 million\">\n";_6+="\t\t\t\t<outline text=\"Australia\" type=\"country\" population=\"21 million\"/>\n";_6+="\t\t\t</outline>\n";_6+="\t\t\t<outline text=\"Europe\" type=\"continent\">\n";_6+="\t\t\t\t<outline text=\"Germany\" type=\"country\"/>\n";_6+="\t\t\t\t<outline text=\"France\" type=\"country\"/>\n";_6+="\t\t\t\t<outline text=\"Spain\" type=\"country\"/>\n";_6+="\t\t\t\t<outline text=\"Italy\" type=\"country\"/>\n";_6+="\t\t\t</outline>\n";_6+="\t\t\t<outline text=\"North America\" type=\"continent\">\n";_6+="\t\t\t\t<outline text=\"Mexico\" type=\"country\" population=\"108 million\" area=\"1,972,550 sq km\">\n";_6+="\t\t\t\t\t<outline text=\"Mexico City\" type=\"city\" population=\"19 million\" timezone=\"-6 UTC\"/>\n";_6+="\t\t\t\t\t<outline text=\"Guadalajara\" type=\"city\" population=\"4 million\" timezone=\"-6 UTC\"/>\n";_6+="\t\t\t\t</outline>\n";_6+="\t\t\t\t<outline text=\"Canada\" type=\"country\" population=\"33 million\" area=\"9,984,670 sq km\">\n";_6+="\t\t\t\t\t<outline text=\"Ottawa\" type=\"city\" population=\"0.9 million\" timezone=\"-5 UTC\"/>\n";_6+="\t\t\t\t\t<outline text=\"Toronto\" type=\"city\" population=\"2.5 million\" timezone=\"-5 UTC\"/>\n";_6+="\t\t\t\t</outline>\n";_6+="\t\t\t\t<outline text=\"United States of America\" type=\"country\"/>\n";_6+="\t\t\t</outline>\n";_6+="\t\t\t<outline text=\"South America\" type=\"continent\">\n";_6+="\t\t\t\t<outline text=\"Brazil\" type=\"country\" population=\"186 million\"/>\n";_6+="\t\t\t\t<outline text=\"Argentina\" type=\"country\" population=\"40 million\"/>\n";_6+="\t\t\t</outline>\n";_6+="\t\t</body>\n";_6+="\t</opml>\n";break;case "stores/geography_withspeciallabel.xml":var _6="";_6+="<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?>\n";_6+="<opml version=\"1.0\">\n";_6+="\t<head>\n";_6+="\t\t<title>geography.opml</title>\n";_6+="\t\t<dateCreated>2006-11-10</dateCreated>\n";_6+="\t\t<dateModified>2006-11-13</dateModified>\n";_6+="\t\t<ownerName>Magellan, Ferdinand</ownerName>\n";_6+="\t</head>\n";_6+="\t<body>\n";_6+="\t\t<outline text=\"Africa\" type=\"continent\" label=\"Continent/Africa\">\n";_6+="\t\t\t<outline text=\"Egypt\" type=\"country\" label=\"Country/Egypt\"/>\n";_6+="\t\t\t<outline text=\"Kenya\" type=\"country\" label=\"Country/Kenya\">\n";_6+="\t\t\t\t<outline text=\"Nairobi\" type=\"city\" label=\"City/Nairobi\"/>\n";_6+="\t\t\t\t<outline text=\"Mombasa\" type=\"city\" label=\"City/Mombasa\"/>\n";_6+="\t\t\t</outline>\n";_6+="\t\t\t<outline text=\"Sudan\" type=\"country\" label=\"Country/Sudan\">\n";_6+="\t\t\t\t<outline text=\"Khartoum\" type=\"city\" label=\"City/Khartoum\"/>\n";_6+="\t\t\t</outline>\n";_6+="\t\t</outline>\n";_6+="\t\t<outline text=\"Asia\" type=\"continent\" label=\"Continent/Asia\">\n";_6+="\t\t\t<outline text=\"China\" type=\"country\" label=\"Country/China\"/>\n";_6+="\t\t\t<outline text=\"India\" type=\"country\" label=\"Country/India\"/>\n";_6+="\t\t\t<outline text=\"Russia\" type=\"country\" label=\"Country/Russia\"/>\n";_6+="\t\t\t<outline text=\"Mongolia\" type=\"country\" label=\"Country/Mongolia\"/>\n";_6+="\t\t</outline>\n";_6+="\t\t<outline text=\"Australia\" type=\"continent\" population=\"21 million\" label=\"Continent/Australia\">\n";_6+="\t\t\t<outline text=\"Australia\" type=\"country\" population=\"21 million\" label=\"Country/Australia\"/>\n";_6+="\t\t</outline>\n";_6+="\t\t<outline text=\"Europe\" type=\"continent\" label=\"Contintent/Europe\">\n";_6+="\t\t\t<outline text=\"Germany\" type=\"country\" label=\"Country/Germany\"/>\n";_6+="\t\t\t<outline text=\"France\" type=\"country\"  label=\"Country/France\"/>\n";_6+="\t\t\t<outline text=\"Spain\" type=\"country\"   label=\"Country/Spain\"/>\n";_6+="\t\t\t<outline text=\"Italy\" type=\"country\"   label=\"Country/Italy\"/>\n";_6+="\t\t</outline>\n";_6+="\t\t<outline text=\"North America\" type=\"continent\" label=\"Continent/North America\">\n";_6+="\t\t\t<outline text=\"Mexico\" type=\"country\" population=\"108 million\" area=\"1,972,550 sq km\" label=\"Country/Mexico\">\n";_6+="\t\t\t\t<outline text=\"Mexico City\" type=\"city\" population=\"19 million\" timezone=\"-6 UTC\" label=\"City/Mexico City\"/>\n";_6+="\t\t\t\t<outline text=\"Guadalajara\" type=\"city\" population=\"4 million\" timezone=\"-6 UTC\"  label=\"City/Guadalajara\"/>\n";_6+="\t\t\t</outline>\n";_6+="\t\t\t<outline text=\"Canada\" type=\"country\" population=\"33 million\" area=\"9,984,670 sq km\" label=\"Country/Canada\">\n";_6+="\t\t\t\t<outline text=\"Ottawa\" type=\"city\" population=\"0.9 million\" timezone=\"-5 UTC\"    label=\"City/Ottawa\"/>\n";_6+="\t\t\t\t<outline text=\"Toronto\" type=\"city\" population=\"2.5 million\" timezone=\"-5 UTC\"   label=\"City/Toronto\"/>\n";_6+="\t\t\t</outline>\n";_6+="\t\t\t<outline text=\"United States of America\" type=\"country\" label=\"Country/United States of America\"/>\n";_6+="\t\t</outline>\n";_6+="\t\t<outline text=\"South America\" type=\"continent\" label=\"Continent/South America\">\n";_6+="\t\t\t<outline text=\"Brazil\" type=\"country\" population=\"186 million\" label=\"Country/Brazil\"/>\n";_6+="\t\t\t<outline text=\"Argentina\" type=\"country\" population=\"40 million\" label=\"Country/Argentina\"/>\n";_6+="\t\t</outline>\n";_6+="\t</body>\n";_6+="</opml>\n";break;}_5.data=_6;}return _5;};_3.data.tests.stores.OpmlStore.verifyItems=function(_7,_8,_9,_a){if(_8.length!=_a.length){return false;}for(var i=0;i<_8.length;i++){if(!(_7.getValue(_8[i],_9)===_a[i])){return false;}}return true;};_3.data.tests.stores.OpmlStore.error=function(t,d,_b){d.errback(_b);};doh.register("dojox.data.tests.stores.OpmlStore",[function testReadAPI_fetch_all(t){var _c=_3.data.tests.stores.OpmlStore.getDatasource("stores/geography.xml");var _d=new _3.data.OpmlStore(_c);var d=new doh.Deferred();function _e(_f){t.is(6,_f.length);d.callback(true);};_d.fetch({onComplete:_e,onError:_1.partial(_3.data.tests.stores.OpmlStore.error,t,d)});return d;},function testReadAPI_fetch_one(t){var _10=_3.data.tests.stores.OpmlStore.getDatasource("stores/geography.xml");var _11=new _3.data.OpmlStore(_10);var d=new doh.Deferred();function _12(_13,_14){t.is(1,_13.length);d.callback(true);};_11.fetch({query:{text:"Asia"},onComplete:_12,onError:_1.partial(_3.data.tests.stores.OpmlStore.error,t,d)});return d;},function testReadAPI_fetch_one_Multiple(t){var _15=_3.data.tests.stores.OpmlStore.getDatasource("stores/geography.xml");var _16=new _3.data.OpmlStore(_15);var d=new doh.Deferred();var _17=[false,false];function _18(_19,_1a){_17[0]=true;t.is(1,_19.length);if(_17[0]&&_17[1]){d.callback(true);}};function _1b(_1c,_1d){_17[1]=true;t.is(1,_1c.length);if(_17[0]&&_17[1]){d.callback(true);}};_16.fetch({query:{text:"Asia"},onComplete:_18,onError:_1.partial(_3.data.tests.stores.OpmlStore.error,t,d)});_16.fetch({query:{text:"North America"},onComplete:_1b,onError:_1.partial(_3.data.tests.stores.OpmlStore.error,t,d)});return d;},function testReadAPI_fetch_one_MultipleMixed(t){var _1e=_3.data.tests.stores.OpmlStore.getDatasource("stores/geography.xml");var _1f=new _3.data.OpmlStore(_1e);var d=new doh.Deferred();var _20=[false,false];function _21(_22,_23){_20[0]=true;t.is(1,_22.length);t.is(0,_1f.getIdentity(_22[0]));if(_20[0]&&_20[1]){d.callback(true);}};function _24(_25){_20[1]=true;t.assertTrue(_25!==null);t.is("Egypt",_1f.getValue(_25,"text"));t.is(1,_1f.getIdentity(_25));if(_20[0]&&_20[1]){d.callback(true);}};_1f.fetch({query:{text:"Africa"},onComplete:_21,onError:_1.partial(_3.data.tests.stores.OpmlStore.error,t,d)});_1f.fetchItemByIdentity({identity:"1",onItem:_24,onError:_1.partial(_3.data.tests.stores.OpmlStore.error,t,d)});return d;},function testReadAPI_fetch_one_deep(t){var _26=_3.data.tests.stores.OpmlStore.getDatasource("stores/geography.xml");var _27=new _3.data.OpmlStore(_26);var d=new doh.Deferred();function _28(_29,_2a){t.is(1,_29.length);d.callback(true);};_27.fetch({query:{text:"Mexico City"},queryOptions:{deep:true},onComplete:_28,onError:_1.partial(_3.data.tests.stores.OpmlStore.error,t,d)});return d;},function testReadAPI_fetch_one_deep_off(t){var _2b=_3.data.tests.stores.OpmlStore.getDatasource("stores/geography.xml");var _2c=new _3.data.OpmlStore(_2b);var d=new doh.Deferred();function _2d(_2e,_2f){t.is(0,_2e.length);d.callback(true);};_2c.fetch({query:{text:"Mexico City"},onComplete:_2d,onError:_1.partial(_3.data.tests.stores.OpmlStore.error,t,d)});return d;},function testReadAPI_fetch_all_streaming(t){var _30=_3.data.tests.stores.OpmlStore.getDatasource("stores/geography.xml");var _31=new _3.data.OpmlStore(_30);var d=new doh.Deferred();count=0;function _32(_33,_34){t.is(6,_33);};function _35(_36,_37){t.assertTrue(_31.isItem(_36));count++;};function _38(_39,_3a){t.is(6,count);t.is(null,_39);d.callback(true);};_31.fetch({onBegin:_32,onItem:_35,onComplete:_38,onError:_1.partial(_3.data.tests.stores.OpmlStore.error,t,d)});return d;},function testReadAPI_fetch_paging(t){var _3b=_3.data.tests.stores.OpmlStore.getDatasource("stores/geography.xml");var _3c=new _3.data.OpmlStore(_3b);var d=new doh.Deferred();function _3d(_3e,_3f){t.is(5,_3e.length);_3f.start=3;_3f.count=1;_3f.onComplete=_40;_3c.fetch(_3f);};function _40(_41,_42){t.is(1,_41.length);_42.start=0;_42.count=5;_42.onComplete=_43;_3c.fetch(_42);};function _43(_44,_45){t.is(5,_44.length);_45.start=2;_45.count=20;_45.onComplete=_46;_3c.fetch(_45);};function _46(_47,_48){t.is(4,_47.length);_48.start=9;_48.count=100;_48.onComplete=_49;_3c.fetch(_48);};function _49(_4a,_4b){t.is(0,_4a.length);_4b.start=2;_4b.count=20;_4b.onComplete=_4c;_3c.fetch(_4b);};function _4c(_4d,_4e){t.is(4,_4d.length);d.callback(true);};function _4f(_50,_51){t.is(6,_50.length);_51.start=1;_51.count=5;_51.onComplete=_3d;_3c.fetch(_51);};_3c.fetch({onComplete:_4f,onError:_1.partial(_3.data.tests.stores.OpmlStore.error,t,d)});return d;},function testReadAPI_getLabel(t){var _52=_3.data.tests.stores.OpmlStore.getDatasource("stores/geography.xml");var _53=new _3.data.OpmlStore(_52);var d=new doh.Deferred();function _54(_55,_56){t.assertEqual(_55.length,1);var _57=_53.getLabel(_55[0]);t.assertTrue(_57!==null);t.assertEqual("Asia",_57);d.callback(true);};_53.fetch({query:{text:"Asia"},onComplete:_54,onError:_1.partial(_3.data.tests.stores.OpmlStore.error,t,d)});return d;},function testReadAPI_getLabelAttributes(t){var _58=_3.data.tests.stores.OpmlStore.getDatasource("stores/geography.xml");var _59=new _3.data.OpmlStore(_58);var d=new doh.Deferred();function _5a(_5b,_5c){t.assertEqual(_5b.length,1);var _5d=_59.getLabelAttributes(_5b[0]);t.assertTrue(_1.isArray(_5d));t.assertEqual("text",_5d[0]);d.callback(true);};_59.fetch({query:{text:"Asia"},onComplete:_5a,onError:_1.partial(_3.data.tests.stores.OpmlStore.error,t,d)});return d;},function testReadAPI_getLabel_nondefault(t){var _5e=_3.data.tests.stores.OpmlStore.getDatasource("stores/geography_withspeciallabel.xml");_5e.label="label";var _5f=new _3.data.OpmlStore(_5e);var d=new doh.Deferred();function _60(_61,_62){t.assertEqual(_61.length,1);var _63=_5f.getLabel(_61[0]);t.assertTrue(_63!==null);t.assertEqual("Continent/Asia",_63);d.callback(true);};_5f.fetch({query:{text:"Asia"},onComplete:_60,onError:_1.partial(_3.data.tests.stores.OpmlStore.error,t,d)});return d;},function testReadAPI_getLabelAttributes_nondefault(t){var _64=_3.data.tests.stores.OpmlStore.getDatasource("stores/geography_withspeciallabel.xml");_64.label="label";var _65=new _3.data.OpmlStore(_64);var d=new doh.Deferred();function _66(_67,_68){t.assertEqual(_67.length,1);var _69=_65.getLabelAttributes(_67[0]);t.assertTrue(_1.isArray(_69));t.assertEqual("label",_69[0]);d.callback(true);};_65.fetch({query:{text:"Asia"},onComplete:_66,onError:_1.partial(_3.data.tests.stores.OpmlStore.error,t,d)});return d;},function testReadAPI_getValue(t){var _6a=_3.data.tests.stores.OpmlStore.getDatasource("stores/geography.xml");var _6b=new _3.data.OpmlStore(_6a);var d=new doh.Deferred();function _6c(_6d){t.is(6,_6d.length);t.is("Africa",_6b.getValue(_6d[0],"text"));t.is("Asia",_6b.getValue(_6d[1],"text"));t.is("Australia",_6b.getValue(_6d[2],"text"));t.is("Europe",_6b.getValue(_6d[3],"text"));t.is("North America",_6b.getValue(_6d[4],"text"));t.is("South America",_6b.getValue(_6d[5],"text"));t.is("continent",_6b.getValue(_6d[1],"type"));t.is("21 million",_6b.getValue(_6d[2],"population"));var _6e=_6b.getValue(_6d[4],"children");t.assertTrue(_6b.isItem(_6e));t.is("Mexico",_6b.getValue(_6e,"text"));t.is("country",_6b.getValue(_6e,"type"));t.is("108 million",_6b.getValue(_6e,"population"));t.is("1,972,550 sq km",_6b.getValue(_6e,"area"));_6e=_6b.getValue(_6e,"children");t.assertTrue(_6b.isItem(_6e));t.is("Mexico City",_6b.getValue(_6e,"text"));t.is("city",_6b.getValue(_6e,"type"));t.is("19 million",_6b.getValue(_6e,"population"));t.is("-6 UTC",_6b.getValue(_6e,"timezone"));d.callback(true);};_6b.fetch({onComplete:_6c,onError:_1.partial(_3.data.tests.stores.OpmlStore.error,t,d)});return d;},function testReadAPI_getValues(t){var _6f=_3.data.tests.stores.OpmlStore.getDatasource("stores/geography.xml");var _70=new _3.data.OpmlStore(_6f);var d=new doh.Deferred();function _71(_72){t.is(1,_72.length);var _73=_70.getValues(_72[0],"children");t.is(3,_73.length);for(var i=0;i<_73.length;i++){t.assertTrue(_70.isItem(_73[i]));}t.is("Mexico",_70.getValues(_73[0],"text")[0]);t.is("country",_70.getValues(_73[0],"type")[0]);t.is("108 million",_70.getValues(_73[0],"population")[0]);t.is("1,972,550 sq km",_70.getValues(_73[0],"area")[0]);t.is("Canada",_70.getValues(_73[1],"text")[0]);t.is("country",_70.getValues(_73[1],"type")[0]);_73=_70.getValues(_73[1],"children");t.is(2,_73.length);for(var i=0;i<_73.length;i++){t.assertTrue(_70.isItem(_73[i]));}t.is("Ottawa",_70.getValues(_73[0],"text")[0]);t.is("Toronto",_70.getValues(_73[1],"text")[0]);d.callback(true);};_70.fetch({query:{text:"North America"},onComplete:_71,onError:_1.partial(_3.data.tests.stores.OpmlStore.error,t,d)});return d;},function testReadAPI_isItem(t){var _74=_3.data.tests.stores.OpmlStore.getDatasource("stores/geography.xml");var _75=new _3.data.OpmlStore(_74);var d=new doh.Deferred();function _76(_77){t.is(6,_77.length);for(var i=0;i<6;i++){t.assertTrue(_75.isItem(_77[i]));}t.assertTrue(!_75.isItem({}));t.assertTrue(!_75.isItem({item:"not an item"}));t.assertTrue(!_75.isItem("not an item"));t.assertTrue(!_75.isItem(["not an item"]));d.callback(true);};_75.fetch({onComplete:_76,onError:_1.partial(_3.data.tests.stores.OpmlStore.error,t,d)});return d;},function testReadAPI_hasAttribute(t){var _78=_3.data.tests.stores.OpmlStore.getDatasource("stores/geography.xml");var _79=new _3.data.OpmlStore(_78);var d=new doh.Deferred();function _7a(_7b){t.is(1,_7b.length);t.assertTrue(_7b[0]!==null);t.assertTrue(_79.hasAttribute(_7b[0],"text"));t.assertTrue(_79.hasAttribute(_7b[0],"type"));t.assertTrue(!_79.hasAttribute(_7b[0],"population"));t.assertTrue(!_79.hasAttribute(_7b[0],"Nothing"));t.assertTrue(!_79.hasAttribute(_7b[0],"Text"));var _7c=false;try{_79.hasAttribute(_7b[0],null);}catch(e){_7c=true;}t.assertTrue(_7c);d.callback(true);};_79.fetch({query:{text:"Asia"},onComplete:_7a,onError:_1.partial(_3.data.tests.stores.OpmlStore.error,t,d)});return d;},function testReadAPI_containsValue(t){var _7d=_3.data.tests.stores.OpmlStore.getDatasource("stores/geography.xml");var _7e=new _3.data.OpmlStore(_7d);var d=new doh.Deferred();function _7f(_80){t.is(1,_80.length);t.assertTrue(_80[0]!==null);t.assertTrue(_7e.containsValue(_80[0],"text","North America"));t.assertTrue(_7e.containsValue(_80[0],"type","continent"));t.assertTrue(!_7e.containsValue(_80[0],"text","America"));t.assertTrue(!_7e.containsValue(_80[0],"Type","continent"));t.assertTrue(!_7e.containsValue(_80[0],"text",null));var _81=_7e.getValues(_80[0],"children");t.assertTrue(_7e.containsValue(_80[0],"children",_81[0]));t.assertTrue(_7e.containsValue(_80[0],"children",_81[1]));t.assertTrue(_7e.containsValue(_80[0],"children",_81[2]));var _82=false;try{_7e.containsValue(_80[0],null,"foo");}catch(e){_82=true;}t.assertTrue(_82);d.callback(true);};_7e.fetch({query:{text:"North America"},onComplete:_7f,onError:_1.partial(_3.data.tests.stores.OpmlStore.error,t,d)});return d;},function testReadAPI_getAttributes(t){var _83=_3.data.tests.stores.OpmlStore.getDatasource("stores/geography.xml");var _84=new _3.data.OpmlStore(_83);var d=new doh.Deferred();function _85(_86){t.is(6,_86.length);t.assertTrue(_84.isItem(_86[0]));var _87=_84.getAttributes(_86[0]);t.is(3,_87.length);for(var i=0;i<_87.length;i++){t.assertTrue((_87[i]==="text"||_87[i]==="type"||_87[i]==="children"));}d.callback(true);};_84.fetch({onComplete:_85,onError:_1.partial(_3.data.tests.stores.OpmlStore.error,t,d)});return d;},function testReadAPI_getFeatures(t){var _88=_3.data.tests.stores.OpmlStore.getDatasource("stores/geography.xml");var _89=new _3.data.OpmlStore(_88);var _8a=_89.getFeatures();var _8b=0;for(i in _8a){t.assertTrue((i==="dojo.data.api.Read")||(i==="dojo.data.api.Identity"));_8b++;}t.assertTrue(_8b===2);},function testReadAPI_fetch_patternMatch0(t){var _8c=_3.data.tests.stores.OpmlStore.getDatasource("stores/geography.xml");var _8d=new _3.data.OpmlStore(_8c);var d=new doh.Deferred();function _8e(_8f,_90){t.is(3,_8f.length);var _91=["Africa","Asia","Australia"];t.assertTrue(_3.data.tests.stores.OpmlStore.verifyItems(_8d,_8f,"text",_91));d.callback(true);};_8d.fetch({query:{text:"A*"},onComplete:_8e,onError:_1.partial(_3.data.tests.stores.OpmlStore.error,t,d)});return d;},function testReadAPI_fetch_patternMatch1(t){var _92=_3.data.tests.stores.OpmlStore.getDatasource("stores/geography.xml");var _93=new _3.data.OpmlStore(_92);var d=new doh.Deferred();function _94(_95,_96){t.assertTrue(_95.length===2);var _97=["North America","South America"];t.assertTrue(_3.data.tests.stores.OpmlStore.verifyItems(_93,_95,"text",_97));d.callback(true);};_93.fetch({query:{text:"*America*"},onComplete:_94,onError:_1.partial(_3.data.tests.stores.OpmlStore.error,t,d)});return d;},function testReadAPI_fetch_patternMatch2(t){var _98=_3.data.tests.stores.OpmlStore.getDatasource("stores/geography.xml");var _99=new _3.data.OpmlStore(_98);var d=new doh.Deferred();function _9a(_9b,_9c){t.is(1,_9b.length);t.assertTrue(_99.getValue(_9b[0],"text")==="Europe");d.callback(true);};_99.fetch({query:{text:"Europe"},onComplete:_9a,onError:_1.partial(_3.data.tests.stores.OpmlStore.error,t,d)});return d;},function testReadAPI_fetch_patternMatch_caseInsensitive(t){var _9d=_3.data.tests.stores.OpmlStore.getDatasource("stores/geography.xml");var _9e=new _3.data.OpmlStore(_9d);var d=new doh.Deferred();function _9f(_a0,_a1){t.is(1,_a0.length);t.assertTrue(_9e.getValue(_a0[0],"text")==="Asia");d.callback(true);};_9e.fetch({query:{text:"asia"},queryOptions:{ignoreCase:true},onComplete:_9f,onError:_1.partial(_3.data.tests.stores.OpmlStore.error,t,d)});return d;},function testReadAPI_fetch_patternMatch_caseSensitive(t){var _a2=_3.data.tests.stores.OpmlStore.getDatasource("stores/geography.xml");var _a3=new _3.data.OpmlStore(_a2);var d=new doh.Deferred();function _a4(_a5,_a6){t.is(0,_a5.length);d.callback(true);};_a3.fetch({query:{text:"ASIA"},queryOptions:{ignoreCase:false},onComplete:_a4,onError:_1.partial(_3.data.tests.stores.OpmlStore.error,t,d)});return d;},function testReadAPI_fetch_sortAlphabetic(t){var _a7=_3.data.tests.stores.OpmlStore.getDatasource("stores/geography.xml");var _a8=new _3.data.OpmlStore(_a7);var d=new doh.Deferred();function _a9(_aa,_ab){var _ac=["Africa","Asia","Australia","Europe","North America","South America"];t.is(6,_aa.length);t.assertTrue(_3.data.tests.stores.OpmlStore.verifyItems(_a8,_aa,"text",_ac));d.callback(true);};var _ad=[{attribute:"text"}];_a8.fetch({sort:_ad,onComplete:_a9,onError:_1.partial(_3.data.tests.stores.OpmlStore.error,t,d)});return d;},function testReadAPI_fetch_sortAlphabeticDescending(t){var _ae=_3.data.tests.stores.OpmlStore.getDatasource("stores/geography.xml");var _af=new _3.data.OpmlStore(_ae);var d=new doh.Deferred();function _b0(_b1,_b2){var _b3=["South America","North America","Europe","Australia","Asia","Africa"];t.is(6,_b1.length);t.assertTrue(_3.data.tests.stores.OpmlStore.verifyItems(_af,_b1,"text",_b3));d.callback(true);};var _b4=[{attribute:"text",descending:true}];_af.fetch({sort:_b4,onComplete:_b0,onError:_1.partial(_3.data.tests.stores.OpmlStore.error,t,d)});return d;},function testReadAPI_fetch_sortAlphabeticWithCount(t){var _b5=_3.data.tests.stores.OpmlStore.getDatasource("stores/geography.xml");var _b6=new _3.data.OpmlStore(_b5);var d=new doh.Deferred();function _b7(_b8,_b9){var _ba=["South America","North America","Europe","Australia"];t.is(4,_b8.length);t.assertTrue(_3.data.tests.stores.OpmlStore.verifyItems(_b6,_b8,"text",_ba));d.callback(true);};var _bb=[{attribute:"text",descending:true}];_b6.fetch({sort:_bb,count:4,onComplete:_b7,onError:_1.partial(_3.data.tests.stores.OpmlStore.error,t,d)});return d;},function testReadAPI_functionConformance(t){var _bc=new _3.data.OpmlStore(_3.data.tests.stores.OpmlStore.getDatasource("stores/geography.xml"));var _bd=new _1.data.api.Read();var _be=true;for(i in _bd){if(i.toString().charAt(0)!=="_"){var _bf=_bd[i];if(typeof _bf==="function"){var _c0=_bc[i];if(!(typeof _c0==="function")){_be=false;break;}}}}t.assertTrue(_be);},function testIdentityAPI_fetchItemByIdentity(t){var _c1=_3.data.tests.stores.OpmlStore.getDatasource("stores/geography.xml");var _c2=new _3.data.OpmlStore(_c1);var d=new doh.Deferred();function _c3(_c4){t.assertTrue(_c4!==null);d.callback(true);};_c2.fetchItemByIdentity({identity:"1",onItem:_c3,onError:_1.partial(_3.data.tests.stores.OpmlStore.error,t,d)});return d;},function testIdentityAPI_fetchItemByIdentity_bad1(t){var _c5=_3.data.tests.stores.OpmlStore.getDatasource("stores/geography.xml");var _c6=new _3.data.OpmlStore(_c5);var d=new doh.Deferred();function _c7(_c8){t.assertTrue(_c8===null);d.callback(true);};_c6.fetchItemByIdentity({identity:"200",onItem:_c7,onError:_1.partial(_3.data.tests.stores.OpmlStore.error,t,d)});return d;},function testIdentityAPI_fetchItemByIdentity_bad2(t){var _c9=_3.data.tests.stores.OpmlStore.getDatasource("stores/geography.xml");var _ca=new _3.data.OpmlStore(_c9);var d=new doh.Deferred();function _cb(_cc){t.assertTrue(_cc===null);d.callback(true);};_ca.fetchItemByIdentity({identity:"-1",onItem:_cb,onError:_1.partial(_3.data.tests.stores.OpmlStore.error,t,d)});return d;},function testIdentityAPI_fetchItemByIdentity_bad3(t){var _cd=_3.data.tests.stores.OpmlStore.getDatasource("stores/geography.xml");var _ce=new _3.data.OpmlStore(_cd);var d=new doh.Deferred();function _cf(_d0){t.assertTrue(_d0===null);d.callback(true);};_ce.fetchItemByIdentity({identity:"999999",onItem:_cf,onError:_1.partial(_3.data.tests.stores.OpmlStore.error,t,d)});return d;},function testIdentityAPI_getIdentity(t){var _d1=_3.data.tests.stores.OpmlStore.getDatasource("stores/geography.xml");var _d2=new _3.data.OpmlStore(_d1);var d=new doh.Deferred();function _d3(_d4,_d5){var _d6=true;for(var i=0;i<_d4.length;i++){if(!(_d2.getIdentity(_d4[i])==i)){_d6=false;break;}}t.assertTrue(_d6);d.callback(true);};_d2.fetch({onComplete:_d3,onError:_1.partial(_3.data.tests.stores.OpmlStore.error,t,d),queryOptions:{deep:true}});return d;},function testIdentityAPI_functionConformance(t){var _d7=new _3.data.OpmlStore(_3.data.tests.stores.OpmlStore.getDatasource("stores/geography.xml"));var _d8=new _1.data.api.Identity();var _d9=true;for(i in _d8){if(i.toString().charAt(0)!=="_"){var _da=_d8[i];if(typeof _da==="function"){var _db=_d7[i];if(!(typeof _db==="function")){_d9=false;break;}}}}t.assertTrue(_d9);}]);});require(["dojox/data/tests/stores/OpmlStore"]);