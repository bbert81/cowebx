/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

define(["dojo","dijit","dojox","dojox/data/FlickrStore","dojo/data/api/Read"],function(_1,_2,_3){_1.getObject("dojox.data.tests.stores.FlickrStore",1);_3.data.tests.stores.FlickrStore.error=function(t,d,_4){d.errback(_4);};doh.register("dojox.data.tests.stores.FlickrStore",[{name:"ReadAPI:  Fetch_One",timeout:10000,runTest:function(t){var _5=new _3.data.FlickrStore();var d=new doh.Deferred();function _6(_7,_8){t.is(1,_7.length);d.callback(true);};_5.fetch({query:{tags:"animals"},count:1,onComplete:_6,onError:_1.partial(_3.data.tests.stores.FlickrStore.error,doh,d)});return d;}},{name:"ReadAPI:  Fetch_20_Streaming",timeout:10000,runTest:function(t){var _9=new _3.data.FlickrStore();var d=new doh.Deferred();count=0;function _a(_b,_c){t.is(20,_b);};function _d(_e,_f){t.assertTrue(_9.isItem(_e));count++;};function _10(_11,_12){t.is(20,count);t.is(null,_11);d.callback(true);};_9.fetch({onBegin:_a,count:20,onItem:_d,onComplete:_10,onError:_1.partial(_3.data.tests.stores.FlickrStore.error,t,d)});return d;}},{name:"ReadAPI:  Fetch_Paging",timeout:30000,runTest:function(t){var _13=new _3.data.FlickrStore();var d=new doh.Deferred();function _14(_15,_16){t.is(5,_15.length);_16.start=3;_16.count=1;_16.onComplete=_17;_13.fetch(_16);};function _17(_18,_19){t.is(1,_18.length);_19.start=0;_19.count=5;_19.onComplete=_1a;_13.fetch(_19);};function _1a(_1b,_1c){t.is(5,_1b.length);_1c.start=2;_1c.count=20;_1c.onComplete=_1d;_13.fetch(_1c);};function _1d(_1e,_1f){t.is(18,_1e.length);_1f.start=9;_1f.count=100;_1f.onComplete=_20;_13.fetch(_1f);};function _20(_21,_22){t.is(11,_21.length);_22.start=2;_22.count=20;_22.onComplete=_23;_13.fetch(_22);};function _23(_24,_25){t.is(18,_24.length);d.callback(true);};function _26(_27,_28){t.is(7,_27.length);_28.start=1;_28.count=5;_28.onComplete=_14;_13.fetch(_28);};_13.fetch({count:7,onComplete:_26,onError:_1.partial(_3.data.tests.stores.FlickrStore.error,t,d)});return d;}},{name:"ReadAPI:  getLabel",timeout:10000,runTest:function(t){var _29=new _3.data.FlickrStore();var d=new doh.Deferred();function _2a(_2b,_2c){t.assertEqual(_2b.length,1);var _2d=_29.getLabel(_2b[0]);t.assertTrue(_2d!==null);d.callback(true);};_29.fetch({query:{tags:"animals"},count:1,onComplete:_2a,onError:_1.partial(_3.data.tests.stores.FlickrStore.error,t,d)});return d;}},{name:"ReadAPI:  getLabelAttributes",timeout:10000,runTest:function(t){var _2e=new _3.data.FlickrStore();var d=new doh.Deferred();function _2f(_30,_31){t.assertEqual(_30.length,1);var _32=_2e.getLabelAttributes(_30[0]);t.assertTrue(_1.isArray(_32));t.assertEqual("title",_32[0]);d.callback(true);};_2e.fetch({query:{tags:"animals"},count:1,onComplete:_2f,onError:_1.partial(_3.data.tests.stores.FlickrStore.error,t,d)});return d;}},{name:"ReadAPI:  getValue",timeout:10000,runTest:function(t){var _33=new _3.data.FlickrStore();var d=new doh.Deferred();function _34(_35){t.is(1,_35.length);t.assertTrue(_33.getValue(_35[0],"title")!==null);t.assertTrue(_33.getValue(_35[0],"imageUrl")!==null);t.assertTrue(_33.getValue(_35[0],"imageUrlSmall")!==null);t.assertTrue(_33.getValue(_35[0],"imageUrlMedium")!==null);d.callback(true);};_33.fetch({count:1,onComplete:_34,onError:_1.partial(_3.data.tests.stores.FlickrStore.error,t,d)});return d;}},{name:"ReadAPI:  getValues",timeout:10000,runTest:function(t){var _36=new _3.data.FlickrStore();var d=new doh.Deferred();function _37(_38){t.is(1,_38.length);t.assertTrue(_36.getValues(_38[0],"title") instanceof Array);t.assertTrue(_36.getValues(_38[0],"description") instanceof Array);t.assertTrue(_36.getValues(_38[0],"imageUrl") instanceof Array);t.assertTrue(_36.getValues(_38[0],"imageUrlSmall") instanceof Array);t.assertTrue(_36.getValues(_38[0],"imageUrlMedium") instanceof Array);d.callback(true);};_36.fetch({count:1,onComplete:_37,onError:_1.partial(_3.data.tests.stores.FlickrStore.error,t,d)});return d;}},{name:"ReadAPI:  isItem",timeout:10000,runTest:function(t){var _39=new _3.data.FlickrStore();var d=new doh.Deferred();function _3a(_3b){t.is(5,_3b.length);for(var i=0;i<_3b.length;i++){t.assertTrue(_39.isItem(_3b[i]));}d.callback(true);};_39.fetch({count:5,onComplete:_3a,onError:_1.partial(_3.data.tests.stores.FlickrStore.error,t,d)});return d;}},{name:"ReadAPI:  hasAttribute",timeout:10000,runTest:function(t){var _3c=new _3.data.FlickrStore();var d=new doh.Deferred();function _3d(_3e){t.is(1,_3e.length);t.assertTrue(_3e[0]!==null);t.assertTrue(_3c.hasAttribute(_3e[0],"title"));t.assertTrue(_3c.hasAttribute(_3e[0],"description"));t.assertTrue(_3c.hasAttribute(_3e[0],"author"));t.assertTrue(!_3c.hasAttribute(_3e[0],"Nothing"));t.assertTrue(!_3c.hasAttribute(_3e[0],"Text"));var _3f=false;try{_3c.hasAttribute(_3e[0],null);}catch(e){_3f=true;}t.assertTrue(_3f);d.callback(true);};_3c.fetch({query:{tags:"animals"},count:1,onComplete:_3d,onError:_1.partial(_3.data.tests.stores.FlickrStore.error,t,d)});return d;}},{name:"ReadAPI:  containsValue",timeout:10000,runTest:function(t){var _40=new _3.data.FlickrStore();var d=new doh.Deferred();function _41(_42){t.is(1,_42.length);d.callback(true);};_40.fetch({query:{tags:"animals"},count:1,onComplete:_41,onError:_1.partial(_3.data.tests.stores.FlickrStore.error,t,d)});return d;}},{name:"ReadAPI:  getAttributes",timeout:10000,runTest:function(t){var _43=new _3.data.FlickrStore();var d=new doh.Deferred();function _44(_45){t.is(1,_45.length);t.assertTrue(_43.isItem(_45[0]));var _46=_43.getAttributes(_45[0]);t.is(10,_46.length);d.callback(true);};_43.fetch({count:1,onComplete:_44,onError:_1.partial(_3.data.tests.stores.FlickrStore.error,t,d)});return d;}},function testReadAPI_getFeatures(t){var _47=new _3.data.FlickrStore();var _48=_47.getFeatures();var _49=0;for(i in _48){t.assertTrue((i==="dojo.data.api.Read"));_49++;}t.assertTrue(_49===1);},function testReadAPI_functionConformance(t){var _4a=new _3.data.FlickrStore();var _4b=new _1.data.api.Read();var _4c=true;for(i in _4b){if(i.toString().charAt(0)!=="_"){var _4d=_4b[i];if(typeof _4d==="function"){var _4e=_4a[i];if(!(typeof _4e==="function")){_4c=false;break;}}}}t.assertTrue(_4c);}]);});require(["dojox/data/tests/stores/FlickrStore"]);