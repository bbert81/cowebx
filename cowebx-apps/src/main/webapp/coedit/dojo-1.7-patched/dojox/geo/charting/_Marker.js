/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

define(["dojo/_base/lang","dojo/_base/declare"],function(_1,_2){return _1.declare("dojox.geo.charting._Marker",null,{_needTooltipRefresh:null,_map:null,constructor:function(_3,_4){this._map=_4;var _5=_4.mapObj;this.features=_5.features;this.markerData=_3;_needTooltipRefresh=false;},show:function(_6){this.currentFeature=this.features[_6];if(this._map.showTooltips&&this.currentFeature){this.markerText=this.currentFeature.markerText||this.markerData[_6]||_6;dojox.geo.charting.showTooltip(this.markerText,this.currentFeature.shape,["before"]);}this._needTooltipRefresh=false;},hide:function(){if(this._map.showTooltips&&this.currentFeature){dojox.geo.charting.hideTooltip(this.currentFeature.shape);}this._needTooltipRefresh=false;},_getGroupBoundingBox:function(_7){var _8=_7.children;var _9=_8[0];var _a=_9.getBoundingBox();this._arround=_1.clone(_a);_1.forEach(_8,function(_b){var _c=_b.getBoundingBox();this._arround.x=Math.min(this._arround.x,_c.x);this._arround.y=Math.min(this._arround.y,_c.y);},this);},_toWindowCoords:function(_d,_e,_f){var _10=(_d.x-this.topLeft[0])*this.scale;var _11=(_d.y-this.topLeft[1])*this.scale;if(_1.isFF==3.5){_d.x=_e.x;_d.y=_e.y;}else{if(_1.isChrome){_d.x=_f.x+_10;_d.y=_f.y+_11;}else{_d.x=_e.x+_10;_d.y=_e.y+_11;}}_d.width=(this.currentFeature._bbox[2])*this.scale;_d.height=(this.currentFeature._bbox[3])*this.scale;_d.x+=_d.width/6;_d.y+=_d.height/4;}});});