/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

define(["dojo/_base/html","./common","dijit/_WidgetBase","dijit/_Container","dijit/_Contained","./View","./Heading","./_ItemBase","./IconItem"],function(_1,_2,_3,_4,_5,_6,_7,_8){return dojo.declare("dojox.mobile.IconContainer",[dijit._WidgetBase,dijit._Container,dijit._Contained],{defaultIcon:"",transition:"below",pressedIconOpacity:0.4,iconBase:"",iconPos:"",back:"Home",label:"My Application",single:false,buildRendering:function(){this.domNode=this.containerNode=this.srcNodeRef||dojo.doc.createElement("UL");this.domNode.className="mblIconContainer";var t=this._terminator=dojo.create("LI");t.className="mblIconItemTerminator";t.innerHTML="&nbsp;";this.domNode.appendChild(t);},_setupSubNodes:function(ul){dojo.forEach(this.getChildren(),function(w){if(this.single){w.subNode.firstChild.style.display="none";}ul.appendChild(w.subNode);});},startup:function(){if(this._started){return;}if(this.transition==="below"){this._setupSubNodes(this.domNode);}else{var _9=new dojox.mobile.View({id:this.id+"_mblApplView"});var _a=this;_9.onAfterTransitionIn=function(_b,_c,_d,_e,_f){_a._opening._open_1();};_9.domNode.style.visibility="hidden";var _10=_9._heading=new dojox.mobile.Heading({back:this._cv(this.back),label:this._cv(this.label),moveTo:this.domNode.parentNode.id,transition:this.transition});_9.addChild(_10);var ul=dojo.doc.createElement("UL");ul.className="mblIconContainer";ul.style.marginTop="0px";this._setupSubNodes(ul);_9.domNode.appendChild(ul);dojo.doc.body.appendChild(_9.domNode);_10.startup();}this.inherited(arguments);},closeAll:function(){var len=this.domNode.childNodes.length,_11,w;for(var i=0;i<len;i++){var _11=this.domNode.childNodes[i];if(_11.nodeType!==1){continue;}if(_11===this._terminator){break;}var w=dijit.byNode(_11);w.containerNode.parentNode.style.display="none";w.setOpacity(w.iconNode,1);}},addChild:function(_12){this.domNode.insertBefore(_12.domNode,this._terminator);_12.transition=this.transition;if(this.transition==="below"){this.domNode.appendChild(_12.subNode);}_12.inheritParams();_12._setIconAttr(_12.icon);}});});