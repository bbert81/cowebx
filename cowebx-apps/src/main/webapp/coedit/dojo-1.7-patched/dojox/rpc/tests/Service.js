/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

define(["dojo","dijit","dojox","dojo/io/script","dojox/rpc/Service","dojox/rpc/JsonRPC","dojox/rpc/Rest","dojox/rpc/Client"],function(_1,_2,_3){_1.getObject("dojox.rpc.tests.Service",1);_3.rpc.tests.service=new _3.rpc.Service(_1.moduleUrl("dojox.rpc.tests.resources","test.smd"));doh.register("dojox.rpc.tests.echo",[{name:"#1 POST,URL,Named Parameters",timeout:4000,setUp:function(){this.svc=_3.rpc.tests.service;},runTest:function(){var d=new doh.Deferred();if(window.location.protocol=="file:"){var _4=new Error("This Test requires a webserver and will fail intentionally if loaded from file://");d.errback(_4);return d;}var td=this.svc.postEcho({message:this.name,foo:2});td.addCallback(this,function(_5){if(_5==this.name){d.callback(true);}else{d.errback(new Error("Unexpected Return Value: ",_5));}});return d;}},{name:"#2 POST,URL,Ordered Parameters",timeout:4000,setUp:function(){this.svc=_3.rpc.tests.service;},runTest:function(){var d=new doh.Deferred();if(window.location.protocol=="file:"){var _6=new Error("This Test requires a webserver and will fail intentionally if loaded from file://");d.errback(_6);return d;}var td=this.svc.postEcho(this.name,2);td.addCallback(this,function(_7){if(_7==this.name){d.callback(true);}else{d.errback(new Error("Unexpected Return Value: ",_7));}});return d;}},{name:"#3 GET,URL,Named Parameters",timeout:4000,setUp:function(){this.svc=_3.rpc.tests.service;},runTest:function(){var d=new doh.Deferred();if(window.location.protocol=="file:"){var _8=new Error("This Test requires a webserver and will fail intentionally if loaded from file://");d.errback(_8);return d;}var td=this.svc.getEcho({message:this.name});td.addCallback(this,function(_9){if(_9==this.name){d.callback(true);}else{d.errback(new Error("Unexpected Return Value: ",_9));}});return d;}},{name:"#3.1 REST PUT,Named Parameters",timeout:4000,setUp:function(){this.svc=_3.rpc.tests.service;},runTest:function(){var d=new doh.Deferred();if(window.location.protocol=="file:"){var _a=new Error("This Test requires a webserver and will fail intentionally if loaded from file://");d.errback(_a);return d;}res=this.name+Math.random();var td=this.svc.restStore.put({location:"res"},res);td.addCallback(this,function(_b){var td=this.svc.restStore({location:"res"});td.addCallback(this,function(_c){if(_c==res){d.callback(true);}else{d.errback(new Error("Unexpected Return Value: ",_c));}});});return d;}},{name:"#3.2 REST POST,Named Parameters",timeout:4000,setUp:function(){this.svc=_3.rpc.tests.service;},runTest:function(){var d=new doh.Deferred();if(window.location.protocol=="file:"){var _d=new Error("This Test requires a webserver and will fail intentionally if loaded from file://");d.errback(_d);return d;}var _e=this.name+Math.random();res+=_e;var td=this.svc.restStore.post({location:"res"},_e);td.addCallback(this,function(_f){var td=this.svc.restStore({location:"res"});td.addCallback(this,function(_10){if(_10==res){d.callback(true);}else{d.errback(new Error("Unexpected Return Value: ",_10));}});});return d;}},{name:"#3.3 REST DELETE,Named Parameters",timeout:4000,setUp:function(){this.svc=_3.rpc.tests.service;},runTest:function(){var d=new doh.Deferred();if(window.location.protocol=="file:"){var err=new Error("This Test requires a webserver and will fail intentionally if loaded from file://");d.errback(err);return d;}var td=this.svc.restStore["delete"]({location:"res"});td.addCallback(this,function(_11){var td=this.svc.restStore({location:"res"});td.addCallback(this,function(_12){if(_12=="deleted"){d.callback(true);}else{d.errback(new Error("Unexpected Return Value: ",_12));}});});return d;}},{name:"#3.4 GET,URL,Named Parameters, Returning Json",timeout:4000,setUp:function(){this.svc=_3.rpc.tests.service;},runTest:function(){var d=new doh.Deferred();if(window.location.protocol=="file:"){var err=new Error("This Test requires a webserver and will fail intentionally if loaded from file://");d.errback(err);return d;}var td=this.svc.getEchoJson({message:"{\"foo\":\"bar\"}"});td.addCallback(this,function(_13){if(_13.foo=="bar"){d.callback(true);}else{d.errback(new Error("Unexpected Return Value: ",_13));}});return d;}},{name:"#3.5 GET,PATH,Named Parameters",timeout:4000,setUp:function(){this.svc=_3.rpc.tests.service;},runTest:function(){var d=new doh.Deferred();if(window.location.protocol=="file:"){var err=new Error("This Test requires a webserver and will fail intentionally if loaded from file://");d.errback(err);return d;}var td=this.svc.getPathEcho({path:"pathname"});td.addCallback(this,function(_14){if(_14=="/path/pathname"){d.callback(true);}else{d.errback(new Error("Unexpected Return Value: ",_14));}});return d;}},{name:"#4.1 GET,URL,Ordered Parameters",timeout:4000,setUp:function(){this.svc=_3.rpc.tests.service;},runTest:function(){var d=new doh.Deferred();if(window.location.protocol=="file:"){var err=new Error("This Test requires a webserver and will fail intentionally if loaded from file://");d.errback(err);return d;}var td=this.svc.getEcho(this.name);td.addCallback(this,function(_15){if(_15==this.name){d.callback(true);}else{d.errback(new Error("Unexpected Return Value: ",_15));}});return d;}},{name:"#4.2 Namespaced GET,URL,Ordered Parameters",timeout:4000,setUp:function(){this.svc=_3.rpc.tests.service;},runTest:function(){var d=new doh.Deferred();if(window.location.protocol=="file:"){var err=new Error("This Test requires a webserver and will fail intentionally if loaded from file://");d.errback(err);return d;}var td=this.svc.namespace.getEcho(this.name);td.addCallback(this,function(_16){if(_16==this.name){d.callback(true);}else{d.errback(new Error("Unexpected Return Value: ",_16));}});return d;}},{name:"#5 POST,URL,Named Parameters",timeout:4000,setUp:function(){this.svc=_3.rpc.tests.service;},runTest:function(){var d=new doh.Deferred();if(window.location.protocol=="file:"){var err=new Error("This Test requires a webserver and will fail intentionally if loaded from file://");d.errback(err);return d;}var td=this.svc.postJsonEcho({message:this.name});td.addCallback(this,function(_17){if(_17&&_17.message&&_17.message==this.name){d.callback(true);}else{d.errback(new Error("Unexpected Return Value: ",_17));}});return d;}},{name:"#6 POST,JSON,Ordered Parameters",timeout:4000,setUp:function(){this.svc=_3.rpc.tests.service;},runTest:function(){var d=new doh.Deferred();if(window.location.protocol=="file:"){var err=new Error("This Test requires a webserver and will fail intentionally if loaded from file://");d.errback(err);return d;}var td=this.svc.postJsonEcho(this.name);td.addCallback(this,function(_18){if(_18&&_18[0]&&_18[0]==this.name){d.callback(true);}else{d.errback(new Error("Unexpected Return Value: ",_18));}});return d;}},{name:"#7 JSONP,URL,Named Parameters",timeout:4000,setUp:function(){this.svc=_3.rpc.tests.service;},runTest:function(){var d=new doh.Deferred();if(window.location.protocol=="file:"){var err=new Error("This Test requires a webserver and will fail intentionally if loaded from file://");d.errback(err);return d;}var td=this.svc.jsonpEcho({message:this.name});td.addCallback(this,function(_19){if(_19==this.name){d.callback(true);}else{d.errback(new Error("Unexpected Return Value: ",_19));}});return d;}},{name:"#8 JSONP,URL, Ordered Parameters",timeout:4000,setUp:function(){this.svc=_3.rpc.tests.service;},runTest:function(){var d=new doh.Deferred();if(window.location.protocol=="file:"){var err=new Error("This Test requires a webserver and will fail intentionally if loaded from file://");d.errback(err);return d;}var td=this.svc.jsonpEcho(this.name);td.addCallback(this,function(_1a){if(_1a==this.name){d.callback(true);}else{d.errback(new Error("Unexpected Return Value: ",_1a));}});return d;}},{name:"#9 POST,JSON-RPC-1.0,Ordered Parameters",timeout:4000,setUp:function(){this.svc=_3.rpc.tests.service;},runTest:function(){var d=new doh.Deferred();if(window.location.protocol=="file:"){var err=new Error("This Test requires a webserver and will fail intentionally if loaded from file://");d.errback(err);return d;}var td=this.svc.postJsonRpc10Echo(this.name);td.addCallback(this,function(_1b){if(_1b==this.name){d.callback(true);}else{d.errback(new Error("Unexpected Return Value: ",_1b));}});return d;}},{name:"#10 POST,JSON-RPC-1.0,Named Parameters",timeout:4000,setUp:function(){this.svc=_3.rpc.tests.service;},runTest:function(){var d=new doh.Deferred();if(window.location.protocol=="file:"){var err=new Error("This Test requires a webserver and will fail intentionally if loaded from file://");d.errback(err);return d;}var td=this.svc.postJsonRpc10EchoNamed(this.name);td.addCallback(this,function(_1c){if(_1c==this.name){d.callback(true);}else{d.errback(new Error("Unexpected Return Value: ",_1c));}});return d;}},{name:"#11 POST,JSON-RPC 2.0, Ordered Parameters",timeout:4000,setUp:function(){this.svc=_3.rpc.tests.service;},runTest:function(){var d=new doh.Deferred();if(window.location.protocol=="file:"){var err=new Error("This Test requires a webserver and will fail intentionally if loaded from file://");d.errback(err);return d;}var td=this.svc.postJsonRpc12Echo(this.name);td.addCallback(this,function(_1d){if(_1d==this.name){d.callback(true);}else{d.errback(new Error("Unexpected Return Value: ",_1d));}});return d;}},{name:"#12 POST,JSON-RPC 2.0, Named Parameters",timeout:4000,setUp:function(){this.svc=_3.rpc.tests.service;},runTest:function(){var d=new doh.Deferred();if(window.location.protocol=="file:"){var err=new Error("This Test requires a webserver and will fail intentionally if loaded from file://");d.errback(err);return d;}var td=this.svc.postJsonRpc12Echo({message:this.name});td.addCallback(this,function(_1e){if(_1e==this.name){d.callback(true);}else{d.errback(new Error("Unexpected Return Value: ",_1e));}});return d;}}]);doh.register("dojox.rpc.tests.jsonRpcForcedError",[{name:"POST,JSON-RPC 1.0, Ordered Parameters",timeout:4000,setUp:function(){this.svc=_3.rpc.tests.service;},runTest:function(){var d=new doh.Deferred();if(window.location.protocol=="file:"){var err=new Error("This Test requires a webserver and will fail intentionally if loaded from file://");d.errback(err);return d;}var td=this.svc.postJsonRpc10ForcedError(this.name);td.addErrback(this,function(_1f){d.callback(true);});return d;}},{name:"POST,JSON-RPC 2.0, Ordered Parameters",timeout:4000,setUp:function(){this.svc=_3.rpc.tests.service;},runTest:function(){var d=new doh.Deferred();if(window.location.protocol=="file:"){var err=new Error("This Test requires a webserver and will fail intentionally if loaded from file://");d.errback(err);return d;}var td=this.svc.postJsonRpc12ForcedError(this.name);td.addErrback(this,function(_20){d.callback(true);});return d;}},{name:"POST,JSON-RPC 2.0, Named Parameters",timeout:4000,setUp:function(){this.svc=_3.rpc.tests.service;},runTest:function(){var d=new doh.Deferred();if(window.location.protocol=="file:"){var err=new Error("This Test requires a webserver and will fail intentionally if loaded from file://");d.errback(err);return d;}var td=this.svc.postJsonRpc12ForcedError({message:this.name});td.addErrback(this,function(_21){d.callback(true);});return d;}}]);});require(["dojox/rpc/tests/Service"]);